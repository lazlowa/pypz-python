<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Developer’s Guide &mdash; pypz  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Contributor’s Guide" href="ht_contribute.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pypz
          </a>
              <div class="version">
                0.9.0b5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/changelog.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core/models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/parameters.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/data_transfer.html">Data transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/executor.html">Executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/deployer.html">Deployer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/kafka_io.html">Kafka IO Plugin</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deployers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deployers/kubernetes.html">Kubernetes Deployer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sniffer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sniffer/overview.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ht_create_pipeline.html">How to create a pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="ht_debug_in_operator.html">How to debug in a deployed operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="ht_contribute.html">Contributor’s Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developer’s Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-the-source-code">Getting the Source Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#project-structure">Project Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#work-in-the-project">Work in the Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-tests">Run Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build">Build</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-the-documentation">Build the Documentation</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lazlowa/pypz-python">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lazlowa/pypz-starter-template">Starter Template Project</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lazlowa/pypz-examples">Examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pypz</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Developer’s Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/guides/ht_develop.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="developer-s-guide">
<span id="developers-guide"></span><h1>Developer’s Guide<a class="headerlink" href="#developer-s-guide" title="Link to this heading"></a></h1>
<section id="getting-the-source-code">
<h2>Getting the Source Code<a class="headerlink" href="#getting-the-source-code" title="Link to this heading"></a></h2>
<p>To get a local copy of the source code, you simply need to clone it using this command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/lazlowa/pypz-python.git
</pre></div>
</div>
</section>
<section id="project-structure">
<h2>Project Structure<a class="headerlink" href="#project-structure" title="Link to this heading"></a></h2>
<p>As you can see, <em>pypz</em> follows the monorepo structure i.e., there is a root project called “pypz-python”, which
contains several subprojects organized into their independent packages. Each subproject follows the
<a class="reference external" href="https://packaging.python.org/en/latest/discussions/src-layout-vs-flat-layout/">src layout</a> i.e., the packages
are organized into a “src” folder in the subproject.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the following, you will see the term <strong>“builtin”</strong> used several times. It refers to interface implementations
that are considered as part of <em>pypz</em>’s base project. These implementations are maintained by this project. This
does not limit you to have your own implementations of the interfaces, however those shall be maintained by you
in your own repository.</p>
<p>If you think that your implementation should be part of the base project, then please contact the maintainers.</p>
</div>
<p><strong>Folder structure:</strong></p>
<ul class="simple">
<li><p><strong>core</strong>, contains the core components and features that makes <em>pypz</em> work</p></li>
<li><p><strong>deployers</strong>, logical grouping of subprojects that are implementing the deployer interface</p></li>
<li><p><strong>plugins</strong>, logical grouping of subprojects that are implementing the plugin interfaces</p></li>
<li><p><strong>sniffer</strong>, contains the sniffer subproject</p></li>
<li><p><strong>docs</strong>, contains the documentation</p></li>
<li><p><strong>.docker</strong>, contains the Dockerfiles and necessary image resources</p></li>
<li><p><strong>.github</strong>, contains the github actions scripts</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Notice that the modules are organized in namespace packages. This enables us to reuse package names in different
subprojects. For example, the deployer interface is provided by the module “pypz.deployers.base”, the Kubernetes
implementation is provided by the module “pypz.deployers.k8s”.</p>
</div>
</section>
<section id="work-in-the-project">
<h2>Work in the Project<a class="headerlink" href="#work-in-the-project" title="Link to this heading"></a></h2>
<p>Due to the project structure, if you want to test/run components of <em>pypz</em>, you need to install the related <em>pypz</em>
dependencies in editable mode. You can achieve this via pip. For example, given you are in the project root, you
can execute the following command to install the subprojects:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>./core/
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>./deployers/k8s/
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>./plugins/kafka_io/
...
</pre></div>
</div>
<p>Or you can install everything via the prepared
<a class="reference external" href="https://github.com/lazlowa/pypz-python/blob/main/requirements.txt">requirements.txt</a> file.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
</section>
<section id="run-tests">
<h2>Run Tests<a class="headerlink" href="#run-tests" title="Link to this heading"></a></h2>
<p>Different subprojects might have different steps to take, before you can run the tests. Please check the
corresponding README for more information.</p>
</section>
<section id="build">
<h2>Build<a class="headerlink" href="#build" title="Link to this heading"></a></h2>
<p>To build your project, you will need the <code class="docutils literal notranslate"><span class="pre">build</span></code> tool first:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>build
</pre></div>
</div>
<p>Then you can build your project by invoking the following command from the subproject’s root</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>build
</pre></div>
</div>
<p>This command will create the sdist and wheel into the dist folder.</p>
</section>
<section id="build-the-documentation">
<h2>Build the Documentation<a class="headerlink" href="#build-the-documentation" title="Link to this heading"></a></h2>
<p>Since the documentation is generated with Sphinx and refers to all subprojects, you need to make sure
that every subproject is installed.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
<p>Additionally, you need to install the dependencies for the Sphinx extensions:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>./docs/requirements.txt
</pre></div>
</div>
<p>As last, you need to install <a class="reference external" href="https://graphviz.org/">GraphViz</a>, since its features are used
by Sphinx to generate images in the documentation.</p>
<p>The indexes are regenerated in the publish action. However, if you want to rebuild them locally,
you can do it with the following commands from the docs folder:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sphinx-apidoc<span class="w"> </span>--implicit-namespaces<span class="w"> </span>-e<span class="w"> </span>-f<span class="w"> </span>--private<span class="w"> </span>-o<span class="w"> </span>./indexes/core<span class="w"> </span>../core/src/pypz/
sphinx-apidoc<span class="w"> </span>--implicit-namespaces<span class="w"> </span>-e<span class="w"> </span>-f<span class="w"> </span>--private<span class="w"> </span>-o<span class="w"> </span>./indexes/sniffer<span class="w"> </span>../sniffer/src/pypz/
sphinx-apidoc<span class="w"> </span>--implicit-namespaces<span class="w"> </span>-e<span class="w"> </span>-f<span class="w"> </span>--private<span class="w"> </span>-o<span class="w"> </span>./indexes/plugins/kafka_io<span class="w"> </span>../plugins/kafka_io/src/pypz/
sphinx-apidoc<span class="w"> </span>--implicit-namespaces<span class="w"> </span>-e<span class="w"> </span>-f<span class="w"> </span>--private<span class="w"> </span>-o<span class="w"> </span>./indexes/deployers/k8s<span class="w"> </span>../deployers/k8s/src/pypz/
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Since the index is generated automatically with implicit namespaces, there are some known issues with the
documentation build:</p>
<ul class="simple">
<li><p>multiple .rst files of the common namespaces are generated, which causes the following warning
<code class="docutils literal notranslate"><span class="pre">WARNING:</span> <span class="pre">duplicate</span> <span class="pre">object</span> <span class="pre">description</span> <span class="pre">[...]</span> <span class="pre">use</span> <span class="pre">:no-index:</span> <span class="pre">for</span> <span class="pre">one</span> <span class="pre">of</span> <span class="pre">them</span></code></p></li>
<li><p>the generated module.rst files are not included in any toctree causing the warning
<code class="docutils literal notranslate"><span class="pre">WARNING:</span> <span class="pre">document</span> <span class="pre">isn't</span> <span class="pre">included</span> <span class="pre">in</span> <span class="pre">any</span> <span class="pre">toctree</span></code></p></li>
</ul>
</div>
<p>You can build the documentation with the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sphinx-build<span class="w"> </span>./docs<span class="w"> </span>./docs/_build
</pre></div>
</div>
<p>Then you can open the generated index.html under ./docs/_build/index.html.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ht_contribute.html" class="btn btn-neutral float-left" title="Contributor’s Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Laszlo Anka.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>