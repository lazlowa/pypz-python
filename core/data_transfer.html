<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data transfer &mdash; pypz  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Executor" href="executor.html" />
    <link rel="prev" title="Parameters" href="parameters.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pypz
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Core:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameters</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data transfer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ports">Ports</a></li>
<li class="toctree-l2"><a class="reference internal" href="#channels">Channels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pypz.core.channels.io.ChannelReader"><code class="docutils literal notranslate"><span class="pre">ChannelReader</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pypz.core.channels.io.ChannelReader._load_input_record_offset"><code class="docutils literal notranslate"><span class="pre">ChannelReader._load_input_record_offset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pypz.core.channels.io.ChannelReader.has_records"><code class="docutils literal notranslate"><span class="pre">ChannelReader.has_records()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pypz.core.channels.io.ChannelReader._read_records"><code class="docutils literal notranslate"><span class="pre">ChannelReader._read_records()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pypz.core.channels.io.ChannelReader._commit_offset"><code class="docutils literal notranslate"><span class="pre">ChannelReader._commit_offset()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pypz.core.channels.io.ChannelWriter"><code class="docutils literal notranslate"><span class="pre">ChannelWriter</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pypz.core.channels.io.ChannelWriter._write_records"><code class="docutils literal notranslate"><span class="pre">ChannelWriter._write_records()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#channelinputport-channeloutputport">ChannelInputPort, ChannelOutputPort</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#expected-parameters">Expected Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="executor.html">Executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployer.html">Deployer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guides/ht_create_pipeline.html">How to create a pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/ht_debug_in_operator.html">How to debug in a deployed operator</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links:</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lazlowa/pypz-python">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lazlowa/pypz-starter-template">Starter Template Project</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lazlowa/pypz-examples">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Index:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modindex/modules.html">pypz</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pypz</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Data transfer</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/core/data_transfer.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-transfer">
<span id="id1"></span><h1>Data transfer<a class="headerlink" href="#data-transfer" title="Link to this heading"></a></h1>
<p>Data transfer between operations in a pipeline is essential, without it we would speak about workflows.
In <em>pypz</em> data transfer is possible between operators through so called <em>ports</em>.</p>
<figure class="align-center" id="id2">
<img alt="Basic pipeline" src="../_images/basic_pipeline.png" />
<figcaption>
<p><span class="caption-text">Basic pipeline</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="ports">
<h2>Ports<a class="headerlink" href="#ports" title="Link to this heading"></a></h2>
<p>An input and output port in <em>pypz</em> is an actual implementation of the corresponding interfaces:</p>
<figure class="align-default" id="id3">
digraph inheritancef6e8615a06 {
bgcolor=transparent;
rankdir=TB;
ratio=fill;
size=&quot;16.0, 10.0&quot;;
  &quot;ABC&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;Helper class that provides a standard way to create an ABC using&quot;];
  &quot;Generic&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;Abstract base class for generic types.&quot;];
  &quot;InputPortPlugin&quot; [URL=&quot;models.html#pypz.core.specs.plugin.InputPortPlugin&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This plugin interface allows to implement data transfer input port for an operator.&quot;];
  &quot;PortPlugin&quot; -&gt; &quot;InputPortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;InputPortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;InputPortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;Instance&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;This class represents the instance specs that serves as base for&quot;];
  &quot;Generic&quot; -&gt; &quot;Instance&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;Instance&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;Instance&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;InstanceGroup&quot; [URL=&quot;models.html#pypz.core.specs.instance.InstanceGroup&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This class provides methods to access instance group related information. It can be&quot;];
  &quot;ABC&quot; -&gt; &quot;InstanceGroup&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;OutputPortPlugin&quot; [URL=&quot;models.html#pypz.core.specs.plugin.OutputPortPlugin&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This plugin interface allows to implement data transfer output port for an operator.&quot;];
  &quot;PortPlugin&quot; -&gt; &quot;OutputPortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;OutputPortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;OutputPortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;Plugin&quot; [URL=&quot;models.html#pypz.core.specs.plugin.Plugin&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This interface has the only purpose to separate the plugin interfaces&quot;];
  &quot;Instance&quot; -&gt; &quot;Plugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;InstanceGroup&quot; -&gt; &quot;Plugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;Plugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;Plugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;PortPlugin&quot; [URL=&quot;models.html#pypz.core.specs.plugin.PortPlugin&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This plugin interface allows to implement common methods for&quot;];
  &quot;Plugin&quot; -&gt; &quot;PortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;PortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;PortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;This is a marker interface with the sole purpose to identify the native specs interfaces.&quot;];
}
<figcaption>
<p><span class="caption-text">Inheritance diagram</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Basically, you are free to implement any technology behind ports as long as you comply to the interfaces.</p>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypz.core.specs.plugin.</span></span><span class="sig-name descname"><span class="pre">InputPortPlugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>This plugin interface allows to implement data transfer input port for an operator.
Operators can communicate via ports. Different technologies can be implemented
allowing operators to talk through them.</p>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">can_retrieve</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span></dt>
<dd><p>This method shall implement the logic to signalize, whether the InputPort is
still able to retrieve. Unable can mean for example that the OutputPort
finished writing. This can be then used to terminate reading.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if port can retrieve, False if not</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit_current_read_offset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>This method shall implement the logic of committing the current
read offset based on the technology used.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">retrieve</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span></dt>
<dd><p>This method shall implement the logic to retrieve data through the port.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>tbd by the implementation</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypz.core.specs.plugin.</span></span><span class="sig-name descname"><span class="pre">OutputPortPlugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>This plugin interface allows to implement data transfer output port for an operator.
Operators can communicate via ports. Different technologies can be implemented
allowing operators to talk through them.</p>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span></dt>
<dd><p>This method shall implement the logic to send data provided as argument.
The implementation shall specify the type of the data and the return value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> – data to be sent</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>tbd by the implementation</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Note that although <em>pypz</em> has a lot of builtin guards and trails to ensure execution stability,
it does not have quality guarantees for custom interface implementations i.e., <em>pypz</em> will not
take responsibility to any damage caused during execution of a custom plugin.</p>
</div>
</section>
<section id="channels">
<h2>Channels<a class="headerlink" href="#channels" title="Link to this heading"></a></h2>
<p>During implementing the data transfer logic behind the port interfaces, you might encounter some challenges, which
takes more time to solve or even forces repetitive activities. For that reason <em>pypz</em> offers you an alternative
view on how data can be transferred across ports.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following feature is completely independent from ports, you can consider as an extension to it, which
you might use or not use. However, <em>pypz</em>’s implemented port plugins are based on this feature.</p>
</div>
<p>In <em>pypz</em>’s view, each connection between ports can/shall be isolated. Such a connection can be represented
as a <em>channel</em>.</p>
<figure class="align-center" id="id4">
<img alt="Pipeline with ports and channels" src="../_images/pipeline_w_ports_and_channels.png" />
<figcaption>
<p><span class="caption-text">Pipeline with ports and channels</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Actually, in the reality the channel is a virtual model, it exists due to the fact, that there is a resource
somewhere, where the data is written to and read from. The actual functionality is put into so called channel
readers and channel writers.</p>
<figure class="align-center" id="id5">
<img alt="ChannelReader/-Writer" src="../_images/channel_w_reader_writer.png" />
<figcaption>
<p><span class="caption-text">ChannelReader/-Writer</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Channels provide a solution to the following challenges:</p>
<ul class="simple">
<li><p>channel/connection state management and transfer i.e., ports are aware of other ports’ states</p></li>
<li><p>continuous health checks i.e., ports are aware, if other port is down</p></li>
<li><p>instance group handling i.e., if the operator is <a class="reference internal" href="models.html#operator-replication"><span class="std std-ref">replicated</span></a>, the channel gets this information</p></li>
<li><p>automatic metrics calculation</p></li>
</ul>
<p>If you want to utilize channels, then you shall implement the abstract methods of the corresponding classes
instead of the port interfaces.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pypz.core.channels.io.ChannelReader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypz.core.channels.io.</span></span><span class="sig-name descname"><span class="pre">ChannelReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#pypz.core.specs.plugin.InputPortPlugin" title="pypz.core.specs.plugin.InputPortPlugin"><span class="pre">InputPortPlugin</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">executor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ThreadPoolExecutor</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pypz.core.channels.io.ChannelReader" title="Link to this definition"></a></dt>
<dd><p>This class is the base of the input channel classes.
The idea is that the class provides some core, protected abstract methods, which shall be implemented by
the developer. These implementations then will be invoked by invoker methods. This makes sure that additional
necessary logic will be performed along the implemented.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pypz.core.channels.io.ChannelReader._load_input_record_offset">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_load_input_record_offset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#pypz.core.channels.io.ChannelReader._load_input_record_offset" title="Link to this definition"></a></dt>
<dd><p>This method shall implement the logic to retrieve stored read offset from the underlying technology. This
can be arbitrary, but the method shall return the stored offset.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>stored offset</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypz.core.channels.io.ChannelReader.has_records">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_records</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#pypz.core.channels.io.ChannelReader.has_records" title="Link to this definition"></a></dt>
<dd><p>This method shall implement the logic to check, if the reader can still read records.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if channel has still records, False if not</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypz.core.channels.io.ChannelReader._read_records">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_read_records</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#pypz.core.channels.io.ChannelReader._read_records" title="Link to this definition"></a></dt>
<dd><p>This method shall implement the logic to read records from the input channel. An ArrayList of records is
expected.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of records OR empty ArrayList if no records read. Null is not accepted.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypz.core.channels.io.ChannelReader._commit_offset">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_commit_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#pypz.core.channels.io.ChannelReader._commit_offset" title="Link to this definition"></a></dt>
<dd><p>This method shall implement the logic that commits the provided offset using the underlying technology.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>offset</strong> – provided offset to commit</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pypz.core.channels.io.ChannelWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypz.core.channels.io.</span></span><span class="sig-name descname"><span class="pre">ChannelWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#pypz.core.specs.plugin.OutputPortPlugin" title="pypz.core.specs.plugin.OutputPortPlugin"><span class="pre">OutputPortPlugin</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">executor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ThreadPoolExecutor</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pypz.core.channels.io.ChannelWriter" title="Link to this definition"></a></dt>
<dd><p>This class is the base of the output channel classes.
The idea is that the class provides some core, protected abstract methods, which shall be implemented by
the developer. These implementations then will be invoked by invoker methods. This makes sure that additional
necessary logic will be performed along the implemented.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pypz.core.channels.io.ChannelWriter._write_records">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_write_records</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">records</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#pypz.core.channels.io.ChannelWriter._write_records" title="Link to this definition"></a></dt>
<dd><p>This method shall implement the logic that writes the records to the output resource. It will automatically
be invoked by the plugin via the corresponding invoker method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>records</strong> – list of records to be written</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice that the abstract methods a protected and shall not be called directly. The channel classes are providing
invoker methods that will invoke the protected methods along with other code that abstracts a lot of complexity
for you. For more information, check the code.</p>
</div>
<p>The question is, how to use the implemented channels. If you think carefully, you will notice that it is always the
same pattern:</p>
<ol class="arabic simple">
<li><p>create the necessary resources</p></li>
<li><p>open the channels</p></li>
<li><p>etl. wait for other connected channels</p></li>
<li><p>start the transmission</p></li>
<li><p>close the channels</p></li>
<li><p>clean up resources</p></li>
</ol>
<p>To unload you creating boilerplate code every time, <em>pypz</em> provides an abstract implementation of the input and
output port plugin, which takes care all of these steps, so at the end you just need to provide the channel
implementation, everything else will be taken care of.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>pypz</em> ships with a channel implementation for Kafka</p>
</div>
</section>
<section id="channelinputport-channeloutputport">
<h2>ChannelInputPort, ChannelOutputPort<a class="headerlink" href="#channelinputport-channeloutputport" title="Link to this heading"></a></h2>
<p>This is a builtin implementation of the InputPortPlugin and OutputPortPlugin interface that integrates
channels into <em>pypz</em>. It provides all the necessary method calls of the channels to perform data transmission.</p>
<figure class="align-default" id="id6">
digraph inheritanceed7a134ae7 {
bgcolor=transparent;
rankdir=TB;
ratio=fill;
size=&quot;16.0, 10.0&quot;;
  &quot;ABC&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;Helper class that provides a standard way to create an ABC using&quot;];
  &quot;ChannelInputPort&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;This class represents an abstract InputPortPlugin, which utilizes the channels&quot;];
  &quot;InputPortPlugin&quot; -&gt; &quot;ChannelInputPort&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ResourceHandlerPlugin&quot; -&gt; &quot;ChannelInputPort&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ExtendedPlugin&quot; -&gt; &quot;ChannelInputPort&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;ChannelInputPort&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ChannelOutputPort&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;This class represents an abstract OutputPortPlugin, which utilizes the channels&quot;];
  &quot;OutputPortPlugin&quot; -&gt; &quot;ChannelOutputPort&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ResourceHandlerPlugin&quot; -&gt; &quot;ChannelOutputPort&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ExtendedPlugin&quot; -&gt; &quot;ChannelOutputPort&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;ChannelOutputPort&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ExtendedPlugin&quot; [URL=&quot;models.html#pypz.core.specs.plugin.ExtendedPlugin&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This interface extends the normal plugin's lifecycle. The methods&quot;];
  &quot;Plugin&quot; -&gt; &quot;ExtendedPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;ExtendedPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;ExtendedPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;Generic&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;Abstract base class for generic types.&quot;];
  &quot;InputPortPlugin&quot; [URL=&quot;models.html#pypz.core.specs.plugin.InputPortPlugin&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This plugin interface allows to implement data transfer input port for an operator.&quot;];
  &quot;PortPlugin&quot; -&gt; &quot;InputPortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;InputPortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;InputPortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;Instance&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;This class represents the instance specs that serves as base for&quot;];
  &quot;Generic&quot; -&gt; &quot;Instance&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;Instance&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;Instance&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;InstanceGroup&quot; [URL=&quot;models.html#pypz.core.specs.instance.InstanceGroup&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This class provides methods to access instance group related information. It can be&quot;];
  &quot;ABC&quot; -&gt; &quot;InstanceGroup&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;OutputPortPlugin&quot; [URL=&quot;models.html#pypz.core.specs.plugin.OutputPortPlugin&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This plugin interface allows to implement data transfer output port for an operator.&quot;];
  &quot;PortPlugin&quot; -&gt; &quot;OutputPortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;OutputPortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;OutputPortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;Plugin&quot; [URL=&quot;models.html#pypz.core.specs.plugin.Plugin&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This interface has the only purpose to separate the plugin interfaces&quot;];
  &quot;Instance&quot; -&gt; &quot;Plugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;InstanceGroup&quot; -&gt; &quot;Plugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;Plugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;Plugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;PortPlugin&quot; [URL=&quot;models.html#pypz.core.specs.plugin.PortPlugin&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This plugin interface allows to implement common methods for&quot;];
  &quot;Plugin&quot; -&gt; &quot;PortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;PortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;PortPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;This is a marker interface with the sole purpose to identify the native specs interfaces.&quot;];
  &quot;ResourceHandlerPlugin&quot; [URL=&quot;models.html#pypz.core.specs.plugin.ResourceHandlerPlugin&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This plugin interface allows to implement resource management related&quot;];
  &quot;Plugin&quot; -&gt; &quot;ResourceHandlerPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;ResourceHandlerPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;ResourceHandlerPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
}
<figcaption>
<p><span class="caption-text">Inheritance diagram</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Notice that both plugins are implementing the <cite>ResourceHandlerPlugin</cite> interface as well, which allows to
create and delete resources for the channels.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that it is not mandatory to use this plugin. If you have a better idea, how to integrate channels
into <em>pypz</em>, feel free to implement it.</p>
</div>
<p>Although <cite>ChannelOutputPort</cite> and <cite>ChannelInputPort</cite> have an N-to-M relation, there is an N-to-1 relation on channel level
i.e., a <cite>ChannelOutputPort</cite> will create as many <cite>ChannelWriters</cite> as many <cite>ChannelInputPort</cite>
is connected, but the <cite>ChannelInputPort</cite> creates only one <cite>ChannelReader</cite>.</p>
<figure class="align-center" id="id7">
<img alt="ChannelWriter-ChannelReader N-1" src="../_images/multiple_channel_w_reader_writer.png" />
<figcaption>
<p><span class="caption-text">ChannelWriter-ChannelReader N-1</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The reason is that from <cite>ChannelInputPort</cite> perspective you have certain expectations w.r.t. records, so there
is no reason to create different <cite>ChannelReader</cite> entities, because all the <cite>ChannelWriters</cite> shall meet your
expectations. In other words, by invoking the <cite>retrieve()</cite> method on the <cite>InputPortPlugin</cite>, you will then get all the
records from all the outputs anyhow. This means as well that you need to manually care for ordering, if you have
such a requirement.</p>
<p>Further information:</p>
<ul class="simple">
<li><p>if an operator is <a class="reference internal" href="models.html#operator-replication"><span class="std std-ref">replicated</span></a>, then it forms an <a class="reference internal" href="models.html#instance-group"><span class="std std-ref">instance group</span></a>;
only group principals can manage resources, replicas cannot</p></li>
<li><p>in case of error <strong>resources WILL NOT be deleted</strong>, this feature ensures that in case the principal instance crashes,
it can restart and continue the work without deleting the resources containing the already transmitted records</p></li>
<li><p>in shutdown phase it is made sure that all channels have at least one attempt to shut down itself even it a previous
channel threw an exception</p></li>
</ul>
<section id="expected-parameters">
<span id="channel-expected-parameters"></span><h3>Expected Parameters<a class="headerlink" href="#expected-parameters" title="Link to this heading"></a></h3>
<p>ChannelInputPort:</p>
<ul class="simple">
<li><p><strong>channelLocation</strong>, location of the channel resource</p></li>
<li><p><strong>channelConfig</strong>, configuration of the channel as dictionary (default: {})</p></li>
<li><p><strong>sequentialModeEnabled</strong>, if set to True, then this port will wait with the processing start until all the
connected output ports are finished (default: False)</p></li>
<li><p><strong>portOpenTimeoutMs</strong>, specifies, how long the port shall wait for incoming connections; 0 means no timeout (default: 0)</p></li>
<li><p><strong>syncConnectionsOpen</strong>, if set to True, the port will wait for every expected output ports to be connected (default: False)</p></li>
</ul>
<p>ChannelOutputPort:</p>
<ul class="simple">
<li><p><strong>channelLocation</strong>, location of the channel resource</p></li>
<li><p><strong>channelConfig</strong>, configuration of the channel as dictionary (default: {})</p></li>
<li><p><strong>portOpenTimeoutMs</strong>, specifies, how long the port shall wait for incoming connections; 0 means no timeout (default: 0)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As mentioned, the parameter “channelConfig” is a dictionary. The base channel class is providing the
following parameters:</p>
<ul class="simple">
<li><p><strong>metricsEnabled</strong>, if set to True, then some metrics will be calculated and logged (default: False)</p></li>
<li><p><strong>logLevel</strong>, specifies the log level for the channel (default: “DEBUG”)</p></li>
</ul>
<p>Different channel implementations may require additional configuration. Example set channel configuration parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plugin</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s2">&quot;channelConfig&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;metricsEnabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</pre></div>
</div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="parameters.html" class="btn btn-neutral float-left" title="Parameters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="executor.html" class="btn btn-neutral float-right" title="Executor" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Laszlo Anka.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>