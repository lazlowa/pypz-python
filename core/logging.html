<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Logging &mdash; pypz  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Deployer" href="deployer.html" />
    <link rel="prev" title="Executor" href="executor.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pypz
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Core:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_transfer.html">Data transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="executor.html">Executor</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Logging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#context-logging">Context Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pypz.core.commons.loggers.ContextLoggerInterface"><code class="docutils literal notranslate"><span class="pre">ContextLoggerInterface</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pypz.core.commons.loggers.ContextLogger"><code class="docutils literal notranslate"><span class="pre">ContextLogger</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#operator-logging">Operator Logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deployer.html">Deployer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guides/ht_create_pipeline.html">How to create a pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/ht_debug_in_operator.html">How to debug in a deployed operator</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links:</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lazlowa/pypz-python">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lazlowa/pypz-starter-template">Starter Template Project</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lazlowa/pypz-examples">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Index:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modindex/modules.html">pypz</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pypz</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Logging</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/core/logging.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="logging">
<span id="id1"></span><h1>Logging<a class="headerlink" href="#logging" title="Link to this heading"></a></h1>
<section id="context-logging">
<h2>Context Logging<a class="headerlink" href="#context-logging" title="Link to this heading"></a></h2>
<p>Since <em>pypz</em> has a <a class="reference internal" href="models.html#models"><span class="std std-ref">multi-layered design</span></a> and entities on each layer are existing in their own context,
we want to have a logging concept that is consistent and reusable across contexts. For example,
if a plugin wants to log something, then it would be nice to reuse the logger of the operator, but denoting that
the log came from the plugin’s context.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">operator</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">)</span>
<span class="n">plugin</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">INFO | pipeline | operator - something</span>
<span class="go">INFO | pipeline | operator | plugin - something</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since a pipeline is a virtual organization of operators, it does not have logger interface, but acts as a
context for the operators.</p>
</div>
<p>So we have the following requirements:</p>
<ul class="simple">
<li><p>one logger to rule them all</p></li>
<li><p>context information shall be available based on from where the logger is called</p></li>
</ul>
<p>The concept involves the following classes:</p>
<dl class="py class">
<dt class="sig sig-object py" id="pypz.core.commons.loggers.ContextLoggerInterface">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypz.core.commons.loggers.</span></span><span class="sig-name descname"><span class="pre">ContextLoggerInterface</span></span><a class="headerlink" href="#pypz.core.commons.loggers.ContextLoggerInterface" title="Link to this definition"></a></dt>
<dd><p>This interface provides the necessary methods to be able to implement
the context logging functionality. Context logging means that there
is exactly one logger, which will be (re)used in the given context.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pypz.core.commons.loggers.ContextLogger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypz.core.commons.loggers.</span></span><span class="sig-name descname"><span class="pre">ContextLogger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pypz.core.commons.loggers.ContextLoggerInterface" title="pypz.core.commons.loggers.ContextLoggerInterface"><span class="pre">ContextLoggerInterface</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">context_stack</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pypz.core.commons.loggers.ContextLogger" title="Link to this definition"></a></dt>
<dd><p>This class has the responsibility to provide a simple logging interface, which
hides the complexity of maintaining the context information. The user can
call the familiar methods without knowing, how the context information are
handled by the protected methods.</p>
<p>By expecting a logger in the constructor we are allowing to reuse existing loggers
from higher contexts i.e., a top-level instance can provide it’s logger to the
nested instances along with the context information. The nested instance can
further forward to it’s nested instances and so on. Each instance provides itself
to the context stack so, if a logger method of the actual context will be called,
then the logger itself will get the context information automatically.</p>
</dd></dl>

<p>The <cite>ContextLoggerInterface</cite> shall be used to implement the actual logging functionality. Notice that
this class provides protected methods that shall not be called directly. The <cite>ContextLogger</cite> provides
the functionality to call the methods of <cite>ContextLoggerInterface</cite> so that it supplies the context
information in the background. You will then use a <cite>ContextLogger</cite> object to perform logging.</p>
</section>
<section id="operator-logging">
<h2>Operator Logging<a class="headerlink" href="#operator-logging" title="Link to this heading"></a></h2>
<p>Since an operator is a self-contained entity, we need to ensure that there is only one logger within
an operator context, which can be used by the operator and the nested plugins as well. An additional
twist to the story that there might be multiple logger plugins in an operator. Instead of calling
each logger plugins’ corresponding methods manually, we want to abstract this, so for the user it
is one call.</p>
<p>The following diagram shows the inheritance map of the logging-relevant classes:</p>
<figure class="align-default" id="id2">
digraph inheritance694f7133b1 {
bgcolor=transparent;
rankdir=TB;
ratio=fill;
size=&quot;16.0, 10.0&quot;;
  &quot;ABC&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;Helper class that provides a standard way to create an ABC using&quot;];
  &quot;ContextLogger&quot; [URL=&quot;#pypz.core.commons.loggers.ContextLogger&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This class has the responsibility to provide a simple logging interface, which&quot;];
  &quot;ContextLoggerInterface&quot; -&gt; &quot;ContextLogger&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ContextLoggerInterface&quot; [URL=&quot;#pypz.core.commons.loggers.ContextLoggerInterface&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This interface provides the necessary methods to be able to implement&quot;];
  &quot;ABC&quot; -&gt; &quot;ContextLoggerInterface&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;DefaultContextLogger&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled];
  &quot;ContextLoggerInterface&quot; -&gt; &quot;DefaultContextLogger&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;DefaultLoggerPlugin&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled];
  &quot;LoggerPlugin&quot; -&gt; &quot;DefaultLoggerPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;DefaultContextLogger&quot; -&gt; &quot;DefaultLoggerPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;Generic&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;Abstract base class for generic types.&quot;];
  &quot;Instance&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;This class represents the instance specs that serves as base for&quot;];
  &quot;Generic&quot; -&gt; &quot;Instance&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;Instance&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;Instance&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;InstanceGroup&quot; [URL=&quot;models.html#pypz.core.specs.instance.InstanceGroup&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This class provides methods to access instance group related information. It can be&quot;];
  &quot;ABC&quot; -&gt; &quot;InstanceGroup&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;LoggerPlugin&quot; [URL=&quot;models.html#pypz.core.specs.plugin.LoggerPlugin&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This addon interface allows to implement different logging technologies&quot;];
  &quot;Plugin&quot; -&gt; &quot;LoggerPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ContextLoggerInterface&quot; -&gt; &quot;LoggerPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;LoggerPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;LoggerPlugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;Plugin&quot; [URL=&quot;models.html#pypz.core.specs.plugin.Plugin&quot;,color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,target=&quot;_top&quot;,tooltip=&quot;This interface has the only purpose to separate the plugin interfaces&quot;];
  &quot;Instance&quot; -&gt; &quot;Plugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;InstanceGroup&quot; -&gt; &quot;Plugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; -&gt; &quot;Plugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;ABC&quot; -&gt; &quot;Plugin&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;RegisteredInterface&quot; [color=dodgerblue1,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=32,height=0.8,shape=ellipse,style=filled,tooltip=&quot;This is a marker interface with the sole purpose to identify the native specs interfaces.&quot;];
}
<figcaption>
<p><span class="caption-text">Inheritance diagram</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Notice that the <cite>LoggerPlugin</cite> interface inherits from the <cite>ContextLoggerInterface</cite>, so if you implement
a logger plugin, then you actually implement the <cite>ContextLoggerInterface</cite>.</p>
<p>Furthermore, there is a <cite>ContextLoggerInterface</cite> implementation in the Operator:</p>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypz.core.specs.operator.Operator.</span></span><span class="sig-name descname"><span class="pre">Logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger_plugins</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="models.html#pypz.core.specs.plugin.LoggerPlugin" title="pypz.core.specs.plugin.LoggerPlugin"><span class="pre">LoggerPlugin</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span></dt>
<dd><p>This is a wrapper class for the logging functionality. It wraps all the
implementations of the LoggerAddons and by invoking either method it
will invoke the corresponding method of each LoggerAddons.</p>
</dd></dl>

<p>This class implements the functionality to abstract the method call of all LoggerPlugins in the operator context.</p>
<p>If you check the Operator’s constructor, you will notice the member <cite>self.__logger</cite>. This is actually a <cite>ContextLogger</cite>
object, where the Operator.Logger is provided as logger implementation and the context is the full name of the
operator. This is the one and only logger in the entire operator context. If a plugin is created within this context,
then it creates its own <cite>ContextLogger</cite> object, however as the logger implementation it will take the logger of
the operator, while adding its own context to the context list. Hence, if any logger method will be called inside
the plugin, it will be routed to the operator’s <cite>ContextLogger</cite>, which invokes the implemented method of the
Operator.Logger, which will call all the LoggerPlugins’ corresponding method.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently there is a guard in Operator.Logger, which will trace back the call stack and will throw an exception
if a LoggerPlugin tries to invoke any of the logger methods. This will prevent recursion at a cost of some
CPU load.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="executor.html" class="btn btn-neutral float-left" title="Executor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="deployer.html" class="btn btn-neutral float-right" title="Deployer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Laszlo Anka.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>