

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Logging &mdash; pypz  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Deployer" href="deployer.html" />
    <link rel="prev" title="Executor" href="executor.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pypz
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/changelog.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_transfer.html">Data Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="executor.html">Executor</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Logging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#context-logging">Context Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#operator-logging">Operator Logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deployer.html">Deployer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/kafka_io.html">Kafka IO Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/rmq_io.html">RabbitMQ IO Plugin</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deployers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deployers/kubernetes.html">Kubernetes Deployer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sniffer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sniffer/overview.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guides/ht_create_pipeline.html">How to create a pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/ht_debug_in_operator.html">How to debug in a deployed operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/ht_contribute.html">Contributor’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/ht_develop.html">Developer’s Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lazlowa/pypz-python">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lazlowa/pypz-starter-template">Starter Template Project</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lazlowa/pypz-examples">Examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pypz</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Logging</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/core/logging.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="logging">
<span id="id1"></span><h1>Logging<a class="headerlink" href="#logging" title="Link to this heading"></a></h1>
<section id="context-logging">
<h2>Context Logging<a class="headerlink" href="#context-logging" title="Link to this heading"></a></h2>
<p>Since <em>pypz</em> has a <a class="reference internal" href="models.html#models"><span class="std std-ref">multi-layered design</span></a> and entities on each layer are existing in their own context,
we want to have a logging concept that is consistent and reusable across contexts. For example,
if a plugin wants to log something, then it would be nice to reuse the logger of the operator, but denoting that
the log came from the plugin’s context.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">operator</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">)</span>
<span class="n">plugin</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">INFO | pipeline | operator - something</span>
<span class="go">INFO | pipeline | operator | plugin - something</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since a pipeline is a virtual organization of operators, it does not have logger interface, but acts as a
context for the operators.</p>
</div>
<p>So we have the following requirements:</p>
<ul class="simple">
<li><p>one logger to rule them all</p></li>
<li><p>context information shall be available based on from where the logger is called</p></li>
</ul>
<p>The concept involves the following classes:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLoggerInterface" title="pypz.core.commons.loggers.ContextLoggerInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextLoggerInterface</span></code></a></p></li>
<li><p><a class="reference internal" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLogger" title="pypz.core.commons.loggers.ContextLogger"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextLogger</span></code></a></p></li>
</ul>
<p>The <a class="reference internal" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLoggerInterface" title="pypz.core.commons.loggers.ContextLoggerInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextLoggerInterface</span></code></a> shall be used to implement
the actual logging functionality. Notice that this class provides protected methods that shall not be called directly.
The <a class="reference internal" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLogger" title="pypz.core.commons.loggers.ContextLogger"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextLogger</span></code></a> provides the functionality to call the methods
of <a class="reference internal" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLoggerInterface" title="pypz.core.commons.loggers.ContextLoggerInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextLoggerInterface</span></code></a> so that it supplies the context
information in the background. You will then use a <a class="reference internal" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLogger" title="pypz.core.commons.loggers.ContextLogger"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextLogger</span></code></a>
object to perform logging.</p>
</section>
<section id="operator-logging">
<h2>Operator Logging<a class="headerlink" href="#operator-logging" title="Link to this heading"></a></h2>
<p>Since an operator is a self-contained entity, we need to ensure that there is only one logger within
an operator context, which can be used by the operator and the nested plugins as well. An additional
twist to the story that there might be multiple logger plugins in an operator. Instead of calling
each logger plugins’ corresponding methods manually, we want to abstract this, so for the user it
seems to be a single method call.</p>
<p>The following diagram shows the inheritance map of the logging-relevant classes:</p>
<figure class="align-default" id="id2">
<div class="graphviz"><img src="../_images/inheritance-b01c8157fca53218d6f0147db7ab11ee08740b76.png" alt="Inheritance diagram of pypz.core.specs.plugin.LoggerPlugin, pypz.core.commons.loggers.ContextLogger, pypz.plugins.loggers.default.DefaultLoggerPlugin" usemap="#inheritance694f7133b1" class="inheritance graphviz" /></div>
<map id="inheritance694f7133b1" name="inheritance694f7133b1">
<area shape="poly" id="node3" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLoggerInterface" target="_top" title="This interface provides the necessary methods to be able to implement" alt="" coords="679,480,667,472,632,465,578,459,511,455,436,454,360,455,293,459,239,465,204,472,193,480,204,488,239,496,293,501,360,505,436,506,511,505,578,501,632,496,667,488"/>
<area shape="poly" id="node6" href="../indexes/core/pypz.core.specs.plugin.html#pypz.core.specs.plugin.LoggerPlugin" target="_top" title="This addon interface allows to implement different logging technologies" alt="" coords="1076,686,1069,678,1050,670,1019,664,981,661,938,659,895,661,857,664,826,670,807,678,800,686,807,694,826,701,857,707,895,711,938,712,981,711,1019,707,1050,701,1069,694"/>
<area shape="poly" id="node8" href="../indexes/core/pypz.core.specs.instance.html#pypz.core.specs.instance.Instance" target="_top" title="This class represents the instance specs that serves as base for" alt="" coords="1269,274,1264,266,1251,259,1231,253,1205,249,1176,248,1147,249,1121,253,1100,259,1087,266,1082,274,1087,283,1100,290,1121,296,1147,300,1176,301,1205,300,1231,296,1251,290,1264,283"/>
<area shape="poly" id="node10" href="../indexes/core/pypz.core.specs.instance.html#pypz.core.specs.instance.InstanceGroup" target="_top" title="This class provides methods to access instance group related information. It can be" alt="" coords="1034,274,1027,266,1005,259,971,253,928,249,881,248,833,249,791,253,757,259,735,266,727,274,735,283,757,290,791,296,833,300,881,301,928,300,971,296,1005,290,1027,283"/>
<area shape="poly" id="node11" href="../indexes/core/pypz.core.specs.plugin.html#pypz.core.specs.plugin.Plugin" target="_top" title="This interface has the only purpose to separate the plugin interfaces" alt="" coords="1129,480,1126,472,1116,465,1100,459,1080,455,1059,454,1037,455,1017,459,1002,465,991,472,988,480,991,488,1002,496,1017,501,1037,505,1059,506,1080,505,1100,501,1116,496,1126,488"/>
<area shape="poly" id="node2" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLogger" target="_top" title="This class has the responsibility to provide a simple logging interface, which" alt="" coords="314,686,306,678,284,670,250,664,207,661,159,659,111,661,67,664,33,670,11,678,3,686,11,694,33,701,67,707,111,711,159,712,207,711,250,707,284,701,306,694"/>
<area shape="poly" id="node4" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.DefaultContextLogger" target="_top" title="The default implementation of the" alt="" coords="784,686,773,678,741,670,690,664,627,661,557,659,487,661,424,664,373,670,341,678,330,686,341,694,373,701,424,707,487,711,557,712,627,711,690,707,741,701,773,694"/>
<area shape="poly" id="node5" href="../indexes/core/pypz.plugins.loggers.default.html#pypz.plugins.loggers.default.DefaultLoggerPlugin" target="_top" title="This is the default implementation of the :class:`LoggerPlugin &lt;pypz.core.specs.plugin.LoggerPlugin&gt;`" alt="" coords="957,891,947,883,917,876,870,870,812,866,747,865,682,866,624,870,577,876,547,883,537,891,547,900,577,907,624,913,682,917,747,918,812,917,870,913,917,907,947,900"/>
<area shape="poly" id="node9" href="../indexes/core/pypz.core.specs.instance.html#pypz.core.specs.instance.RegisteredInterface" target="_top" title="This is a marker interface with the sole purpose to identify the native specs interfaces." alt="" coords="1529,68,1519,60,1490,52,1445,47,1389,43,1326,42,1263,43,1207,47,1162,52,1133,60,1123,68,1133,76,1162,83,1207,89,1263,93,1326,94,1389,93,1445,89,1490,83,1519,76"/>
</map><figcaption>
<p><span class="caption-text">Inheritance diagram</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Notice that the <a class="reference internal" href="../indexes/core/pypz.core.specs.plugin.html#pypz.core.specs.plugin.LoggerPlugin" title="pypz.core.specs.plugin.LoggerPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoggerPlugin</span></code></a> interface inherits from the
<a class="reference internal" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLoggerInterface" title="pypz.core.commons.loggers.ContextLoggerInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextLoggerInterface</span></code></a>, so if you implement
a logger plugin, then you actually implement the
<a class="reference internal" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLoggerInterface" title="pypz.core.commons.loggers.ContextLoggerInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextLoggerInterface</span></code></a>.</p>
<p>Furthermore, there is a <a class="reference internal" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLoggerInterface" title="pypz.core.commons.loggers.ContextLoggerInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextLoggerInterface</span></code></a>
implementation in the Operator: <a class="reference internal" href="../indexes/core/pypz.core.specs.operator.html#pypz.core.specs.operator.Operator.Logger" title="pypz.core.specs.operator.Operator.Logger"><code class="xref py py-class docutils literal notranslate"><span class="pre">pypz.core.specs.operator.Operator.Logger</span></code></a>.</p>
<p>This class implements the functionality to abstract the method call of all
<a class="reference internal" href="../indexes/core/pypz.core.specs.plugin.html#pypz.core.specs.plugin.LoggerPlugin" title="pypz.core.specs.plugin.LoggerPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoggerPlugins</span></code></a> in the operator context.</p>
<p>If you check the Operator’s constructor, you will notice the member <cite>self.__logger</cite>.
This is actually a <a class="reference internal" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLogger" title="pypz.core.commons.loggers.ContextLogger"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextLogger</span></code></a>
object, where the <a class="reference internal" href="../indexes/core/pypz.core.specs.operator.html#pypz.core.specs.operator.Operator.Logger" title="pypz.core.specs.operator.Operator.Logger"><code class="xref py py-class docutils literal notranslate"><span class="pre">Operator.Logger</span></code></a>
is provided as logger implementation and the context is the full name of the
operator. This is the one and only logger in the entire operator context. If a plugin is created within this context,
then it creates its own <a class="reference internal" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLogger" title="pypz.core.commons.loggers.ContextLogger"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextLogger</span></code></a> object, however as the logger
implementation it will take the logger of
the operator, while adding its own context to the context list. Hence, if any logger method will be called inside
the plugin, it will be routed to the operator’s <a class="reference internal" href="../indexes/core/pypz.core.commons.loggers.html#pypz.core.commons.loggers.ContextLogger" title="pypz.core.commons.loggers.ContextLogger"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextLogger</span></code></a>,
which invokes the implemented method of the Operator.Logger, which will call all the LoggerPlugins’ corresponding method.</p>
<p>To access the logger in either the operator or plugin context, you simply need to invoke the <code class="docutils literal notranslate"><span class="pre">get_logger()</span></code> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">operator</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">)</span>
<span class="n">plugin</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently there is a guard in Operator.Logger, which will trace back the call stack and will throw an exception
if a LoggerPlugin tries to invoke any of the logger methods. This will prevent recursion at a cost of some
CPU load.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="executor.html" class="btn btn-neutral float-left" title="Executor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="deployer.html" class="btn btn-neutral float-right" title="Deployer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Laszlo Anka.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>