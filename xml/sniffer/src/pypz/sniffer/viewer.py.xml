<?xml-stylesheet type="text/xsl" href="../../../../../mypy-html.xslt"?><mypy-report-file name="sniffer\src\pypz\sniffer\viewer.py" module="sniffer.src.pypz.sniffer.viewer"><line any_info="No Anys on this line!" content="# =============================================================================" number="1" precision="empty"/><line any_info="No Anys on this line!" content="# Copyright (c) 2024 by Laszlo Anka. All rights reserved." number="2" precision="empty"/><line any_info="No Anys on this line!" content="#" number="3" precision="empty"/><line any_info="No Anys on this line!" content="# Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);" number="4" precision="empty"/><line any_info="No Anys on this line!" content="# you may not use this file except in compliance with the License." number="5" precision="empty"/><line any_info="No Anys on this line!" content="# You may obtain a copy of the License at" number="6" precision="empty"/><line any_info="No Anys on this line!" content="#" number="7" precision="empty"/><line any_info="No Anys on this line!" content="#     http://www.apache.org/licenses/LICENSE-2.0" number="8" precision="empty"/><line any_info="No Anys on this line!" content="#" number="9" precision="empty"/><line any_info="No Anys on this line!" content="# Unless required by applicable law or agreed to in writing, software" number="10" precision="empty"/><line any_info="No Anys on this line!" content="# distributed under the License is distributed on an &quot;AS IS&quot; BASIS," number="11" precision="empty"/><line any_info="No Anys on this line!" content="# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied." number="12" precision="empty"/><line any_info="No Anys on this line!" content="# See the License for the specific language governing permissions and" number="13" precision="empty"/><line any_info="No Anys on this line!" content="# limitations under the License." number="14" precision="empty"/><line any_info="No Anys on this line!" content="# =============================================================================" number="15" precision="empty"/><line any_info="No Anys on this line!" content="import time" number="16" precision="precise"/><line any_info="No Anys on this line!" content="import tkinter as tk" number="17" precision="precise"/><line any_info="No Anys on this line!" content="from concurrent.futures import ThreadPoolExecutor, Future" number="18" precision="precise"/><line any_info="No Anys on this line!" content="" number="19" precision="empty"/><line any_info="No Anys on this line!" content="from pypz.sniffer.sniffer import PipelineSniffer" number="20" precision="any"/><line any_info="No Anys on this line!" content="from pypz.sniffer.utils import order_operators_by_connections" number="21" precision="any"/><line any_info="No Anys on this line!" content="from pypz.sniffer.views import OperatorView, ChannelView, ChannelRWView, ViewConfig" number="22" precision="any"/><line any_info="No Anys on this line!" content="from pypz.abstracts.channel_ports import ChannelInputPort, ChannelOutputPort" number="23" precision="any"/><line any_info="No Anys on this line!" content="from pypz.core.specs.dtos import PipelineInstanceDTO" number="24" precision="any"/><line any_info="No Anys on this line!" content="from pypz.core.specs.operator import Operator" number="25" precision="any"/><line any_info="No Anys on this line!" content="from pypz.core.specs.pipeline import Pipeline" number="26" precision="any"/><line any_info="No Anys on this line!" content="" number="27" precision="empty"/><line any_info="No Anys on this line!" content="" number="28" precision="empty"/><line any_info="No Anys on this line!" content="class PipelineSnifferViewer(tk.Tk):" number="29" precision="precise"/><line any_info="No Anys on this line!" content="" number="30" precision="empty"/><line any_info="No Anys on this line!" content="    @staticmethod" number="31" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="    def create_from_string(source: str):" number="32" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="        return PipelineSnifferViewer(Pipeline.create_from_string(source, mock_nonexistent=True))" number="33" precision="any"/><line any_info="No Anys on this line!" content="" number="34" precision="empty"/><line any_info="No Anys on this line!" content="    @staticmethod" number="35" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x1)&#10;Unannotated (x1)" content="    def create_from_dto(instance_dto: PipelineInstanceDTO):" number="36" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x5)" content="        return PipelineSnifferViewer(Pipeline.create_from_dto(instance_dto, mock_nonexistent=True))" number="37" precision="any"/><line any_info="No Anys on this line!" content="" number="38" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x1)" content="    def __init__(self, pipeline: Pipeline):" number="39" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="        super().__init__(screenName=pipeline.get_full_name())" number="40" precision="any"/><line any_info="No Anys on this line!" content="" number="41" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x2)" content="        if not isinstance(pipeline, Pipeline):" number="42" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x2)&#10;Unimported (x2)" content="            raise TypeError(f&quot;Invalid argument type: {type(pipeline)}; Expected: {Pipeline}&quot;)" number="43" precision="any"/><line any_info="No Anys on this line!" content="" number="44" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="        self._pipeline: Pipeline = pipeline" number="45" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x5)" content="        self._pipeline_sniffer: PipelineSniffer = PipelineSniffer(pipeline)" number="46" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x3)" content="        self._executor: ThreadPoolExecutor = ThreadPoolExecutor()" number="47" precision="precise"/><line any_info="Any Types on this line: &#10;Omitted Generics (x6)" content="        self._sniffer_futures: set[Future] = set()" number="48" precision="imprecise"/><line any_info="Any Types on this line: &#10;Unimported (x6)" content="        self._operator_views: dict[Operator, OperatorView] = dict()" number="49" precision="imprecise"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="        self._channel_views: dict[str, ChannelView] = dict()" number="50" precision="imprecise"/><line any_info="Any Types on this line: &#10;Unimported (x5)" content="        self._dependency_levels: list[set[Operator]] = order_operators_by_connections(pipeline)" number="51" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="        self._operator_view_channel_reader_count: dict[Operator, int] = dict()" number="52" precision="imprecise"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="        self._operator_view_channel_writer_count: dict[Operator, int] = dict()" number="53" precision="imprecise"/><line any_info="No Anys on this line!" content="        self._stopped: bool = False" number="54" precision="precise"/><line any_info="No Anys on this line!" content="        self._shutdown: bool = False" number="55" precision="precise"/><line any_info="No Anys on this line!" content="        self._start_time: int = 0" number="56" precision="precise"/><line any_info="No Anys on this line!" content="" number="57" precision="empty"/><line any_info="No Anys on this line!" content="        # Initialize graphical elements" number="58" precision="empty"/><line any_info="No Anys on this line!" content="        # =============================" number="59" precision="empty"/><line any_info="No Anys on this line!" content="" number="60" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="        self.title(f&quot;Pipeline Sniffer ({pipeline.get_full_name()})&quot;)" number="61" precision="any"/><line any_info="No Anys on this line!" content="        self.geometry(&quot;1200x600&quot;)" number="62" precision="precise"/><line any_info="No Anys on this line!" content="        self.minsize(600, 200)" number="63" precision="precise"/><line any_info="No Anys on this line!" content="" number="64" precision="empty"/><line any_info="Any Types on this line: &#10;Explicit (x1)" content="        self._frame = tk.Frame(self)" number="65" precision="precise"/><line any_info="Any Types on this line: &#10;Explicit (x2)" content="        self._frame.pack(fill=tk.BOTH, expand=True)" number="66" precision="precise"/><line any_info="No Anys on this line!" content="" number="67" precision="empty"/><line any_info="Any Types on this line: &#10;Explicit (x1)&#10;Unannotated (x1)" content="        self._pipeline_canvas = tk.Canvas(self._frame, background=&quot;WhiteSmoke&quot;)" number="68" precision="precise"/><line any_info="Any Types on this line: &#10;Explicit (x2)" content="        self._pipeline_canvas.grid(row=0, column=0, sticky=&quot;nsew&quot;)" number="69" precision="precise"/><line any_info="No Anys on this line!" content="" number="70" precision="empty"/><line any_info="Any Types on this line: &#10;Explicit (x3)&#10;Unannotated (x2)" content="        self._hsb = tk.Scrollbar(self._frame, orient=&quot;horizontal&quot;, command=self._pipeline_canvas.xview)" number="71" precision="imprecise"/><line any_info="Any Types on this line: &#10;Explicit (x2)" content="        self._hsb.grid(row=1, column=0, sticky=&quot;ew&quot;)" number="72" precision="precise"/><line any_info="No Anys on this line!" content="" number="73" precision="empty"/><line any_info="Any Types on this line: &#10;Explicit (x3)&#10;Unannotated (x2)" content="        self._vsb = tk.Scrollbar(self._frame, orient=&quot;vertical&quot;, command=self._pipeline_canvas.yview)" number="74" precision="imprecise"/><line any_info="Any Types on this line: &#10;Explicit (x2)" content="        self._vsb.grid(row=0, column=1, sticky=&quot;ns&quot;)" number="75" precision="precise"/><line any_info="No Anys on this line!" content="" number="76" precision="empty"/><line any_info="Any Types on this line: &#10;Explicit (x7)&#10;Unannotated (x1)" content="        self._pipeline_canvas.configure(xscrollcommand=self._hsb.set, yscrollcommand=self._vsb.set)" number="77" precision="imprecise"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        self._pipeline_canvas.bind(&quot;&lt;Configure&gt;&quot;, self.__on_canvas_configure)" number="78" precision="precise"/><line any_info="No Anys on this line!" content="" number="79" precision="empty"/><line any_info="Any Types on this line: &#10;Explicit (x1)" content="        self._status_frame = tk.Frame(self._frame, height=50)" number="80" precision="precise"/><line any_info="Any Types on this line: &#10;Explicit (x2)" content="        self._status_frame.grid(row=2, column=0, sticky=&quot;nsew&quot;)" number="81" precision="precise"/><line any_info="No Anys on this line!" content="" number="82" precision="empty"/><line any_info="Any Types on this line: &#10;Explicit (x1)" content="        self._sniffer_status = tk.Label(self._status_frame, text=&quot;Status: Waiting&quot;, font=(&quot;Helvetica&quot;, 12, &quot;bold&quot;))" number="83" precision="precise"/><line any_info="Any Types on this line: &#10;Explicit (x2)" content="        self._sniffer_status.grid(row=0, column=0, sticky=&quot;w&quot;)" number="84" precision="precise"/><line any_info="Any Types on this line: &#10;Explicit (x2)" content="        self._status_frame.columnconfigure(0, pad=10)" number="85" precision="imprecise"/><line any_info="Any Types on this line: &#10;Explicit (x1)" content="        self._elapsed_time_display = tk.Label(self._status_frame, text=&quot;Elapsed time: 0 [sec]&quot;," number="86" precision="precise"/><line any_info="No Anys on this line!" content="                                              font=(&quot;Helvetica&quot;, 12, &quot;bold&quot;))" number="87" precision="precise"/><line any_info="Any Types on this line: &#10;Explicit (x2)" content="        self._elapsed_time_display.grid(row=0, column=1, sticky=&quot;nsw&quot;)" number="88" precision="precise"/><line any_info="No Anys on this line!" content="" number="89" precision="empty"/><line any_info="Any Types on this line: &#10;Explicit (x2)" content="        self._frame.columnconfigure(0, weight=1)" number="90" precision="imprecise"/><line any_info="Any Types on this line: &#10;Explicit (x2)" content="        self._frame.rowconfigure(0, weight=1)" number="91" precision="imprecise"/><line any_info="No Anys on this line!" content="" number="92" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        self.wm_protocol(&quot;WM_DELETE_WINDOW&quot;, self.__exit)" number="93" precision="precise"/><line any_info="No Anys on this line!" content="" number="94" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        self.__init_sniffer()" number="95" precision="any"/><line any_info="No Anys on this line!" content="" number="96" precision="empty"/><line any_info="No Anys on this line!" content="    def __on_canvas_configure(self, event):" number="97" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        self._pipeline_canvas.configure(scrollregion=self._pipeline_canvas.bbox(&quot;all&quot;))" number="98" precision="any"/><line any_info="No Anys on this line!" content="" number="99" precision="empty"/><line any_info="No Anys on this line!" content="    def __init_sniffer(self):" number="100" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x8)" content="        for operator in self._pipeline.get_protected().get_nested_instances().values():" number="101" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x1)" content="            self._operator_views[operator] = OperatorView(self._pipeline_canvas, operator)" number="102" precision="any"/><line any_info="No Anys on this line!" content="" number="103" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        for operator, operator_view in self._operator_views.items():" number="104" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="            for input_port, input_port_view in operator_view.input_port_views.items():" number="105" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="                for output_port in input_port.get_connected_ports():" number="106" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="                    if isinstance(output_port, ChannelOutputPort):" number="107" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x1)" content="                        channel_id = PipelineSniffer.get_channel_id(input_port, output_port)" number="108" precision="any"/><line any_info="No Anys on this line!" content="" number="109" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                        if channel_id not in self._channel_views:" number="110" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                            if operator not in self._operator_view_channel_reader_count:" number="111" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                                self._operator_view_channel_reader_count[operator] = 0" number="112" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="                            if output_port.get_context() not in self._operator_view_channel_writer_count:" number="113" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="                                self._operator_view_channel_writer_count[output_port.get_context()] = 0" number="114" precision="any"/><line any_info="No Anys on this line!" content="" number="115" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                            self._channel_views[channel_id] = \" number="116" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="                                ChannelView(self._pipeline_canvas," number="117" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                                            self._operator_view_channel_reader_count[operator]," number="118" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="                                            self._operator_view_channel_writer_count[output_port.get_context()])" number="119" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                            self._operator_view_channel_reader_count[operator] += 1" number="120" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="                            self._operator_view_channel_writer_count[output_port.get_context()] += 1" number="121" precision="any"/><line any_info="No Anys on this line!" content="" number="122" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x1)" content="                        channel_reader_view = ChannelRWView(self._pipeline_canvas)" number="123" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x9)" content="                        self._pipeline_sniffer.channel_sniffers[channel_id].subscribe(input_port.get_full_name()," number="124" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                                                                                      channel_reader_view.on_update)" number="125" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="                        input_port_view.channel_views.append(channel_reader_view)" number="126" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="                        self._channel_views[channel_id].channel_reader_views.append(channel_reader_view)" number="127" precision="any"/><line any_info="No Anys on this line!" content="" number="128" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="            for output_port, output_port_view in operator_view.output_port_views.items():" number="129" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="                for input_port in output_port.get_connected_ports():" number="130" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="                    if isinstance(input_port, ChannelInputPort):" number="131" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x1)" content="                        channel_id = PipelineSniffer.get_channel_id(input_port, output_port)" number="132" precision="any"/><line any_info="No Anys on this line!" content="" number="133" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                        if channel_id not in self._channel_views:" number="134" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                            if operator not in self._operator_view_channel_writer_count:" number="135" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                                self._operator_view_channel_writer_count[operator] = 0" number="136" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="                            if input_port.get_context() not in self._operator_view_channel_reader_count:" number="137" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="                                self._operator_view_channel_reader_count[input_port.get_context()] = 0" number="138" precision="any"/><line any_info="No Anys on this line!" content="" number="139" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                            self._channel_views[channel_id] = \" number="140" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="                                ChannelView(self._pipeline_canvas," number="141" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="                                            self._operator_view_channel_reader_count[input_port.get_context()]," number="142" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                                            self._operator_view_channel_writer_count[operator])" number="143" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                            self._operator_view_channel_writer_count[operator] += 1" number="144" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="                            self._operator_view_channel_reader_count[input_port.get_context()] += 1" number="145" precision="any"/><line any_info="No Anys on this line!" content="" number="146" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x1)" content="                        channel_writer_view = ChannelRWView(self._pipeline_canvas)" number="147" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x9)" content="                        self._pipeline_sniffer.channel_sniffers[channel_id].subscribe(output_port.get_full_name()," number="148" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                                                                                      channel_writer_view.on_update)" number="149" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="                        output_port_view.channel_views.append(channel_writer_view)" number="150" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="                        self._channel_views[channel_id].channel_writer_views.append(channel_writer_view)" number="151" precision="any"/><line any_info="No Anys on this line!" content="" number="152" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        next_y = ViewConfig.operator_start_pos_y" number="153" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Omitted Generics (x2)" content="        for idx, level in enumerate(self._dependency_levels):" number="154" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="            next_y = ViewConfig.operator_start_pos_y" number="155" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            for operator in level:" number="156" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x9)&#10;Unimported (x1)" content="                self._operator_views[operator].draw(ViewConfig.operator_start_pos_x + idx *" number="157" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x2)" content="                                                    (ViewConfig.operator_width + ViewConfig.operator_spacing_hor)," number="158" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="                                                    next_y)" number="159" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Unimported (x1)" content="                next_y = ViewConfig.replica_spacing_ver + self._operator_views[operator].bottom" number="160" precision="any"/><line any_info="No Anys on this line!" content="" number="161" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="                for replica in operator.get_replicas():" number="162" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x9)&#10;Unimported (x1)" content="                    self._operator_views[replica].draw(ViewConfig.operator_start_pos_x + idx *" number="163" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x2)" content="                                                       (ViewConfig.operator_width + ViewConfig.operator_spacing_hor)," number="164" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="                                                       next_y)" number="165" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Unimported (x1)" content="                    next_y = ViewConfig.replica_spacing_ver + self._operator_views[replica].bottom" number="166" precision="any"/><line any_info="No Anys on this line!" content="" number="167" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="                next_y += ViewConfig.operator_spacing_ver" number="168" precision="any"/><line any_info="No Anys on this line!" content="" number="169" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        for channel_view in self._channel_views.values():" number="170" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="            next_y = channel_view.draw(next_y)" number="171" precision="any"/><line any_info="No Anys on this line!" content="" number="172" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        self.after(100, self.__start_sniffer)" number="173" precision="any"/><line any_info="No Anys on this line!" content="" number="174" precision="empty"/><line any_info="No Anys on this line!" content="    def __start_sniffer(self):" number="175" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        if self._shutdown:" number="176" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            self._sniffer_status.config(text=&quot;Status: Stopping&quot;)" number="177" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            self.after(0, self.__stop_sniffer)" number="178" precision="any"/><line any_info="No Anys on this line!" content="            return" number="179" precision="empty"/><line any_info="No Anys on this line!" content="" number="180" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        if self._pipeline_sniffer.start():" number="181" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            self._start_time = time.time()" number="182" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            self._sniffer_status.config(text=&quot;Status: Running&quot;)" number="183" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            self.after(100, self.__sniff)" number="184" precision="any"/><line any_info="No Anys on this line!" content="        else:" number="185" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            self.after(1000, self.__start_sniffer)" number="186" precision="any"/><line any_info="No Anys on this line!" content="" number="187" precision="empty"/><line any_info="No Anys on this line!" content="    def __sniff(self):" number="188" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x11)&#10;Omitted Generics (x4)" content="        self._elapsed_time_display.config(text=f&quot;Elapsed time: {round(time.time() - self._start_time)} [sec]&quot;)" number="189" precision="any"/><line any_info="No Anys on this line!" content="" number="190" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        for future in self._sniffer_futures:" number="191" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            if future.cancelled():" number="192" precision="any"/><line any_info="No Anys on this line!" content="                continue" number="193" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            if not future.done():" number="194" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                self.after(1000, self.__sniff)" number="195" precision="any"/><line any_info="No Anys on this line!" content="                return" number="196" precision="empty"/><line any_info="No Anys on this line!" content="" number="197" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        if self._shutdown:" number="198" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            self._sniffer_status.config(text=&quot;Status: Stopping&quot;)" number="199" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            self.after(0, self.__stop_sniffer)" number="200" precision="any"/><line any_info="No Anys on this line!" content="            return" number="201" precision="empty"/><line any_info="No Anys on this line!" content="" number="202" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        all_finished = True" number="203" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        for channel_view in self._channel_views.values():" number="204" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            for channel_reader_view in channel_view.channel_reader_views:" number="205" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                if not channel_reader_view.is_finished:" number="206" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="                    all_finished = False" number="207" precision="any"/><line any_info="No Anys on this line!" content="                    break" number="208" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            for channel_writer_view in channel_view.channel_writer_views:" number="209" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                if not channel_writer_view.is_finished:" number="210" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="                    all_finished = False" number="211" precision="any"/><line any_info="No Anys on this line!" content="                    break" number="212" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            if not all_finished:" number="213" precision="any"/><line any_info="No Anys on this line!" content="                break" number="214" precision="any"/><line any_info="No Anys on this line!" content="" number="215" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        if all_finished:" number="216" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            self.after(0, self.__stop_sniffer)" number="217" precision="any"/><line any_info="No Anys on this line!" content="        else:" number="218" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="            self._sniffer_futures = {self._executor.submit(channel_sniffer.sniff) for" number="219" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="                                     channel_sniffer in self._pipeline_sniffer.channel_sniffers.values()}" number="220" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="            self.after(1000, self.__sniff)" number="221" precision="any"/><line any_info="No Anys on this line!" content="" number="222" precision="empty"/><line any_info="No Anys on this line!" content="    def __stop_sniffer(self):" number="223" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        if self._pipeline_sniffer.stop():" number="224" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            if not self._stopped:" number="225" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                self._sniffer_status.config(text=&quot;Status: Stopped&quot;)" number="226" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="                self._stopped = True" number="227" precision="any"/><line any_info="No Anys on this line!" content="" number="228" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            if self._shutdown:" number="229" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="                self.quit()" number="230" precision="any"/><line any_info="No Anys on this line!" content="" number="231" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        self.after(500, self.__stop_sniffer)" number="232" precision="any"/><line any_info="No Anys on this line!" content="" number="233" precision="empty"/><line any_info="No Anys on this line!" content="    def __exit(self):" number="234" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        self._executor.shutdown(wait=False, cancel_futures=True)" number="235" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        self._shutdown = True" number="236" precision="any"/></mypy-report-file>