<?xml-stylesheet type="text/xsl" href="../../../../mypy-html.xslt"?><mypy-report-file name="core\test\channels_tests\status_monitor_test.py" module="core.test.channels_tests.status_monitor_test"><line any_info="No Anys on this line!" content="# =============================================================================" number="1" precision="empty"/><line any_info="No Anys on this line!" content="# Copyright (c) 2024 by Laszlo Anka. All rights reserved." number="2" precision="empty"/><line any_info="No Anys on this line!" content="#" number="3" precision="empty"/><line any_info="No Anys on this line!" content="# Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);" number="4" precision="empty"/><line any_info="No Anys on this line!" content="# you may not use this file except in compliance with the License." number="5" precision="empty"/><line any_info="No Anys on this line!" content="# You may obtain a copy of the License at" number="6" precision="empty"/><line any_info="No Anys on this line!" content="#" number="7" precision="empty"/><line any_info="No Anys on this line!" content="#     http://www.apache.org/licenses/LICENSE-2.0" number="8" precision="empty"/><line any_info="No Anys on this line!" content="#" number="9" precision="empty"/><line any_info="No Anys on this line!" content="# Unless required by applicable law or agreed to in writing, software" number="10" precision="empty"/><line any_info="No Anys on this line!" content="# distributed under the License is distributed on an &quot;AS IS&quot; BASIS," number="11" precision="empty"/><line any_info="No Anys on this line!" content="# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied." number="12" precision="empty"/><line any_info="No Anys on this line!" content="# See the License for the specific language governing permissions and" number="13" precision="empty"/><line any_info="No Anys on this line!" content="# limitations under the License." number="14" precision="empty"/><line any_info="No Anys on this line!" content="# =============================================================================" number="15" precision="empty"/><line any_info="No Anys on this line!" content="import unittest" number="16" precision="precise"/><line any_info="No Anys on this line!" content="" number="17" precision="empty"/><line any_info="No Anys on this line!" content="from pypz.core.channels.status import ChannelStatusMonitor, ChannelStatusMessage, ChannelStatus" number="18" precision="any"/><line any_info="No Anys on this line!" content="from pypz.core.commons.utils import current_time_millis" number="19" precision="any"/><line any_info="No Anys on this line!" content="from core.test.channels_tests.resources import TestChannel" number="20" precision="precise"/><line any_info="No Anys on this line!" content="from pypz.core.specs.misc import BlankPortPlugin" number="21" precision="any"/><line any_info="No Anys on this line!" content="" number="22" precision="empty"/><line any_info="No Anys on this line!" content="" number="23" precision="empty"/><line any_info="No Anys on this line!" content="class ChannelStatusMonitorTest(unittest.TestCase):" number="24" precision="precise"/><line any_info="No Anys on this line!" content="" number="25" precision="empty"/><line any_info="No Anys on this line!" content="    def test_status_update_expect_success(self):" number="26" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        monitor = ChannelStatusMonitor(&quot;channelName&quot;, &quot;ownerName&quot;)" number="27" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        monitor.last_update_sent_timestamp_ms = 0" number="28" precision="any"/><line any_info="No Anys on this line!" content="" number="29" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="30" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="31" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Opened," number="32" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="33" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=1))" number="34" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_opened())" number="35" precision="any"/><line any_info="No Anys on this line!" content="" number="36" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="37" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="38" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Started," number="39" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="40" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=1))" number="41" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_started())" number="42" precision="any"/><line any_info="No Anys on this line!" content="" number="43" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="44" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="45" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Stopped," number="46" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="47" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=1))" number="48" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_stopped())" number="49" precision="any"/><line any_info="No Anys on this line!" content="" number="50" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="51" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="52" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Closed," number="53" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="54" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=1))" number="55" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_closed())" number="56" precision="any"/><line any_info="No Anys on this line!" content="" number="57" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="58" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="59" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Error," number="60" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="61" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=1))" number="62" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_error())" number="63" precision="any"/><line any_info="No Anys on this line!" content="" number="64" precision="empty"/><line any_info="No Anys on this line!" content="    def test_status_update_with_invalid_time_expect_no_update(self):" number="65" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        monitor = ChannelStatusMonitor(&quot;channelName&quot;, &quot;ownerName&quot;)" number="66" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        monitor.last_update_sent_timestamp_ms = 10" number="67" precision="any"/><line any_info="No Anys on this line!" content="" number="68" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="69" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="70" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Opened," number="71" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="72" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=11))" number="73" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_opened())" number="74" precision="any"/><line any_info="No Anys on this line!" content="" number="75" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="76" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="77" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Started," number="78" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="79" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=1))" number="80" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_opened())" number="81" precision="any"/><line any_info="No Anys on this line!" content="" number="82" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="83" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="84" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Stopped," number="85" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="86" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=3))" number="87" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_opened())" number="88" precision="any"/><line any_info="No Anys on this line!" content="" number="89" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="90" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="91" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Closed," number="92" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="93" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=4))" number="94" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_opened())" number="95" precision="any"/><line any_info="No Anys on this line!" content="" number="96" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="97" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="98" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Error," number="99" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="100" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=5))" number="101" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_opened())" number="102" precision="any"/><line any_info="No Anys on this line!" content="" number="103" precision="empty"/><line any_info="No Anys on this line!" content="    def test_status_update_from_error_state_expect_no_update(self):" number="104" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        monitor = ChannelStatusMonitor(&quot;channelName&quot;, &quot;ownerName&quot;)" number="105" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        monitor.last_update_sent_timestamp_ms = 0" number="106" precision="any"/><line any_info="No Anys on this line!" content="" number="107" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="108" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="109" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Error," number="110" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="111" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=1))" number="112" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_error())" number="113" precision="any"/><line any_info="No Anys on this line!" content="" number="114" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="115" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="116" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Stopped," number="117" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="118" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=2))" number="119" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_error())" number="120" precision="any"/><line any_info="No Anys on this line!" content="" number="121" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="122" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="123" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Closed," number="124" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="125" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=3))" number="126" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_error())" number="127" precision="any"/><line any_info="No Anys on this line!" content="" number="128" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="129" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="130" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Started," number="131" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="132" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=4))" number="133" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_started())" number="134" precision="any"/><line any_info="No Anys on this line!" content="" number="135" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="136" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="137" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Error," number="138" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="139" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=5))" number="140" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_error())" number="141" precision="any"/><line any_info="No Anys on this line!" content="" number="142" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="143" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="144" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Opened," number="145" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="146" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=6))" number="147" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_opened())" number="148" precision="any"/><line any_info="No Anys on this line!" content="" number="149" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x1)&#10;Unannotated (x1)" content="    def on_status_update_with_payload_func(self, status_message: ChannelStatusMessage):" number="150" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x3)&#10;Unimported (x2)" content="        self.assertEqual(&quot;channelName&quot;, status_message.channel_name)" number="151" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x3)&#10;Unimported (x2)" content="        self.assertEqual(&quot;ownerName&quot;, status_message.channel_context_name)" number="152" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x3)&#10;Unimported (x4)" content="        self.assertEqual(ChannelStatus.Started, status_message.status)" number="153" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x3)&#10;Unimported (x2)" content="        self.assertEqual(1, status_message.timestamp)" number="154" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x3)&#10;Unimported (x2)" content="        self.assertEqual(2, len(status_message.payload))" number="155" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x3)&#10;Unimported (x3)" content="        self.assertEqual(&quot;payload1&quot;, status_message.payload[0])" number="156" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x3)&#10;Unimported (x3)" content="        self.assertEqual(&quot;payload2&quot;, status_message.payload[1])" number="157" precision="any"/><line any_info="No Anys on this line!" content="" number="158" precision="empty"/><line any_info="No Anys on this line!" content="    def test_update_status_monitor_with_payload_and_callback_expect_success(self):" number="159" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        monitor = ChannelStatusMonitor(&quot;channelName&quot;, &quot;ownerName&quot;)" number="160" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        monitor.last_update_sent_timestamp_ms = 0" number="161" precision="any"/><line any_info="No Anys on this line!" content="" number="162" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        monitor.on_status_update(self.on_status_update_with_payload_func)" number="163" precision="any"/><line any_info="No Anys on this line!" content="" number="164" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="165" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="166" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Started," number="167" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="168" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=1))" number="169" precision="any"/><line any_info="No Anys on this line!" content="" number="170" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x1)&#10;Unannotated (x1)" content="    def on_status_update_without_payload_func(self, status_message: ChannelStatusMessage):" number="171" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x3)&#10;Unimported (x2)" content="        self.assertEqual(1, status_message.timestamp)" number="172" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x1)&#10;Unimported (x2)" content="        self.assertIsNone(status_message.payload)" number="173" precision="any"/><line any_info="No Anys on this line!" content="" number="174" precision="empty"/><line any_info="No Anys on this line!" content="    def test_test_update_status_monitor_without_payload_and_callback_expect_success(self):" number="175" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        monitor = ChannelStatusMonitor(&quot;channelName&quot;, &quot;ownerName&quot;)" number="176" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        monitor.last_update_sent_timestamp_ms = 0" number="177" precision="any"/><line any_info="No Anys on this line!" content="" number="178" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        monitor.on_status_update(self.on_status_update_without_payload_func)" number="179" precision="any"/><line any_info="No Anys on this line!" content="" number="180" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="181" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="182" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Started," number="183" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=None," number="184" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=1))" number="185" precision="any"/><line any_info="No Anys on this line!" content="" number="186" precision="empty"/><line any_info="No Anys on this line!" content="    def test_update_status_monitor_with_invalid_channel_name_expect_error(self):" number="187" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        monitor = ChannelStatusMonitor(&quot;channelName&quot;, &quot;ownerName&quot;)" number="188" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        monitor.last_update_sent_timestamp_ms = 0" number="189" precision="any"/><line any_info="No Anys on this line!" content="" number="190" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        with self.assertRaises(AttributeError):" number="191" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="            monitor.update(ChannelStatusMessage(channel_name=&quot;invalidChannelName&quot;," number="192" precision="any"/><line any_info="No Anys on this line!" content="                                                channel_context_name=&quot;ownerName&quot;," number="193" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                status=ChannelStatus.Started," number="194" precision="any"/><line any_info="No Anys on this line!" content="                                                payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="195" precision="any"/><line any_info="No Anys on this line!" content="                                                timestamp=1))" number="196" precision="any"/><line any_info="No Anys on this line!" content="" number="197" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        with self.assertRaises(AttributeError):" number="198" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="            monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="199" precision="any"/><line any_info="No Anys on this line!" content="                                                channel_context_name=&quot;invalidOwnerName&quot;," number="200" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                status=ChannelStatus.Started," number="201" precision="any"/><line any_info="No Anys on this line!" content="                                                payload=[&quot;payload1&quot;, &quot;payload2&quot;]," number="202" precision="any"/><line any_info="No Anys on this line!" content="                                                timestamp=1))" number="203" precision="any"/><line any_info="No Anys on this line!" content="" number="204" precision="empty"/><line any_info="No Anys on this line!" content="    def test_health_check_no_status_update_expect_healthy(self):" number="205" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        monitor = ChannelStatusMonitor(&quot;channelName&quot;, &quot;ownerName&quot;)" number="206" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_healthy())" number="207" precision="any"/><line any_info="No Anys on this line!" content="" number="208" precision="empty"/><line any_info="No Anys on this line!" content="    def test_health_check_no_status_update_expect_unhealthy(self):" number="209" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        monitor = ChannelStatusMonitor(&quot;channelName&quot;, &quot;ownerName&quot;)" number="210" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)&#10;Unimported (x2)" content="        monitor.monitor_start_timestamp = current_time_millis() - ChannelStatusMonitor.ValidPatienceTimeInMs - 100" number="211" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertFalse(monitor.is_channel_healthy())" number="212" precision="any"/><line any_info="No Anys on this line!" content="" number="213" precision="empty"/><line any_info="No Anys on this line!" content="    def test_health_check_with_status_update_expect_healthy(self):" number="214" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        monitor = ChannelStatusMonitor(&quot;channelName&quot;, &quot;ownerName&quot;)" number="215" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="216" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="217" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Started," number="218" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=None," number="219" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            timestamp=current_time_millis()))" number="220" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertTrue(monitor.is_channel_healthy())" number="221" precision="any"/><line any_info="No Anys on this line!" content="" number="222" precision="empty"/><line any_info="No Anys on this line!" content="    def test_health_check_with_status_update_expect_unhealthy(self):" number="223" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        monitor = ChannelStatusMonitor(&quot;channelName&quot;, &quot;ownerName&quot;)" number="224" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        monitor.update(ChannelStatusMessage(channel_name=&quot;channelName&quot;," number="225" precision="any"/><line any_info="No Anys on this line!" content="                                            channel_context_name=&quot;ownerName&quot;," number="226" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                            status=ChannelStatus.Started," number="227" precision="any"/><line any_info="No Anys on this line!" content="                                            payload=None," number="228" precision="any"/><line any_info="No Anys on this line!" content="                                            timestamp=1))" number="229" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertFalse(monitor.is_channel_healthy())" number="230" precision="any"/><line any_info="No Anys on this line!" content="" number="231" precision="empty"/><line any_info="No Anys on this line!" content="    def test_get_channel_names_if_channel1_name_contains_string_expect_success(self):" number="232" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x2)" content="        channel_base = TestChannel(&quot;testChannel&quot;, BlankPortPlugin(&quot;ownerName&quot;), None)" number="233" precision="any"/><line any_info="No Anys on this line!" content="" number="234" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x1)" content="        channel_base._status_map[&quot;channel1&quot;] = ChannelStatusMonitor(&quot;channel1&quot;, &quot;ownerName&quot;, None, channel_base._logger)" number="235" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Unimported (x1)" content="        channel_base._status_map.get(&quot;channel1&quot;).update(ChannelStatusMessage(channel_name=&quot;channel1&quot;," number="236" precision="any"/><line any_info="No Anys on this line!" content="                                                                             channel_context_name=&quot;ownerName&quot;," number="237" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                             status=ChannelStatus.Started," number="238" precision="any"/><line any_info="No Anys on this line!" content="                                                                             payload=None," number="239" precision="any"/><line any_info="No Anys on this line!" content="                                                                             timestamp=1))" number="240" precision="any"/><line any_info="No Anys on this line!" content="" number="241" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        self.assertEqual(1, len(channel_base.retrieve_connected_channel_unique_names(" number="242" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: &quot;channel&quot; in flt.get_channel_unique_name())))" number="243" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        self.assertEqual(0, len(channel_base.retrieve_connected_channel_unique_names(" number="244" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: &quot;wrong&quot; in flt.get_channel_unique_name())))" number="245" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="        self.assertEqual(&quot;channel1&quot;, channel_base.retrieve_connected_channel_unique_names(" number="246" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: &quot;channel&quot; in flt.get_channel_unique_name()).pop())" number="247" precision="any"/><line any_info="No Anys on this line!" content="" number="248" precision="empty"/><line any_info="No Anys on this line!" content="    def test_get_channel_names_if_with_valid_statuses_expect_success(self):" number="249" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x2)" content="        channel_base = TestChannel(&quot;testChannel&quot;, BlankPortPlugin(&quot;owner&quot;), None)" number="250" precision="any"/><line any_info="No Anys on this line!" content="" number="251" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x1)" content="        channel_base._status_map[&quot;channel1&quot;] = ChannelStatusMonitor(&quot;channel1&quot;, &quot;ownerName&quot;, None, channel_base._logger)" number="252" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Unimported (x1)" content="        channel_base._status_map.get(&quot;channel1&quot;).update(ChannelStatusMessage(channel_name=&quot;channel1&quot;," number="253" precision="any"/><line any_info="No Anys on this line!" content="                                                                             channel_context_name=&quot;ownerName&quot;," number="254" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                             status=ChannelStatus.Opened," number="255" precision="any"/><line any_info="No Anys on this line!" content="                                                                             payload=None," number="256" precision="any"/><line any_info="No Anys on this line!" content="                                                                             timestamp=1))" number="257" precision="any"/><line any_info="No Anys on this line!" content="" number="258" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x1)" content="        channel_base._status_map[&quot;channel2&quot;] = ChannelStatusMonitor(&quot;channel2&quot;, &quot;ownerName&quot;, None, channel_base._logger)" number="259" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Unimported (x1)" content="        channel_base._status_map.get(&quot;channel2&quot;).update(ChannelStatusMessage(channel_name=&quot;channel2&quot;," number="260" precision="any"/><line any_info="No Anys on this line!" content="                                                                             channel_context_name=&quot;ownerName&quot;," number="261" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                             status=ChannelStatus.Closed," number="262" precision="any"/><line any_info="No Anys on this line!" content="                                                                             payload=None," number="263" precision="any"/><line any_info="No Anys on this line!" content="                                                                             timestamp=1))" number="264" precision="any"/><line any_info="No Anys on this line!" content="" number="265" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x1)" content="        channel_base._status_map[&quot;channel3&quot;] = ChannelStatusMonitor(&quot;channel3&quot;, &quot;ownerName&quot;, None, channel_base._logger)" number="266" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Unimported (x1)" content="        channel_base._status_map.get(&quot;channel3&quot;).update(ChannelStatusMessage(channel_name=&quot;channel3&quot;," number="267" precision="any"/><line any_info="No Anys on this line!" content="                                                                             channel_context_name=&quot;ownerName&quot;," number="268" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                             status=ChannelStatus.Error," number="269" precision="any"/><line any_info="No Anys on this line!" content="                                                                             payload=None," number="270" precision="any"/><line any_info="No Anys on this line!" content="                                                                             timestamp=1))" number="271" precision="any"/><line any_info="No Anys on this line!" content="" number="272" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x1)" content="        channel_base._status_map[&quot;channel4&quot;] = ChannelStatusMonitor(&quot;channel4&quot;, &quot;ownerName&quot;, None, channel_base._logger)" number="273" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Unimported (x1)" content="        channel_base._status_map.get(&quot;channel4&quot;).update(ChannelStatusMessage(channel_name=&quot;channel4&quot;," number="274" precision="any"/><line any_info="No Anys on this line!" content="                                                                             channel_context_name=&quot;ownerName&quot;," number="275" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                             status=ChannelStatus.Stopped," number="276" precision="any"/><line any_info="No Anys on this line!" content="                                                                             payload=None," number="277" precision="any"/><line any_info="No Anys on this line!" content="                                                                             timestamp=1))" number="278" precision="any"/><line any_info="No Anys on this line!" content="" number="279" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x1)" content="        channel_base._status_map[&quot;channel5&quot;] = ChannelStatusMonitor(&quot;channel5&quot;, &quot;ownerName&quot;, None, channel_base._logger)" number="280" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Unimported (x1)" content="        channel_base._status_map.get(&quot;channel5&quot;).update(ChannelStatusMessage(channel_name=&quot;channel5&quot;," number="281" precision="any"/><line any_info="No Anys on this line!" content="                                                                             channel_context_name=&quot;ownerName&quot;," number="282" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                             status=ChannelStatus.Started," number="283" precision="any"/><line any_info="No Anys on this line!" content="                                                                             payload=None," number="284" precision="any"/><line any_info="No Anys on this line!" content="                                                                             timestamp=1))" number="285" precision="any"/><line any_info="No Anys on this line!" content="" number="286" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x1)" content="        channel_base._status_map[&quot;channel6&quot;] = ChannelStatusMonitor(&quot;channel6&quot;, &quot;ownerName&quot;, None, channel_base._logger)" number="287" precision="any"/><line any_info="No Anys on this line!" content="" number="288" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        self.assertEqual(6, len(channel_base.retrieve_connected_channel_unique_names(None)))" number="289" precision="any"/><line any_info="No Anys on this line!" content="" number="290" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        self.assertEqual(1, len(channel_base.retrieve_connected_channel_unique_names(" number="291" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_opened())))" number="292" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Omitted Generics (x3)" content="        self.assertEqual(&quot;channel1&quot;, list(channel_base.retrieve_connected_channel_unique_names(" number="293" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_opened()))[0])" number="294" precision="any"/><line any_info="No Anys on this line!" content="" number="295" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        self.assertEqual(1, len(channel_base.retrieve_connected_channel_unique_names(" number="296" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_closed())))" number="297" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Omitted Generics (x3)" content="        self.assertEqual(&quot;channel2&quot;, list(channel_base.retrieve_connected_channel_unique_names(" number="298" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_closed()))[0])" number="299" precision="any"/><line any_info="No Anys on this line!" content="" number="300" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        self.assertEqual(1, len(channel_base.retrieve_connected_channel_unique_names(" number="301" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_error())))" number="302" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Omitted Generics (x3)" content="        self.assertEqual(&quot;channel3&quot;, list(channel_base.retrieve_connected_channel_unique_names(" number="303" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_error()))[0])" number="304" precision="any"/><line any_info="No Anys on this line!" content="" number="305" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        self.assertEqual(1, len(channel_base.retrieve_connected_channel_unique_names(" number="306" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_stopped())))" number="307" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Omitted Generics (x3)" content="        self.assertEqual(&quot;channel4&quot;, list(channel_base.retrieve_connected_channel_unique_names(" number="308" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_stopped()))[0])" number="309" precision="any"/><line any_info="No Anys on this line!" content="" number="310" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        self.assertEqual(1, len(channel_base.retrieve_connected_channel_unique_names(" number="311" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_started())))" number="312" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Omitted Generics (x3)" content="        self.assertEqual(&quot;channel5&quot;, list(channel_base.retrieve_connected_channel_unique_names(" number="313" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_started()))[0])" number="314" precision="any"/><line any_info="No Anys on this line!" content="" number="315" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        self.assertEqual(1, len(channel_base.retrieve_connected_channel_unique_names(" number="316" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_not_initialised())))" number="317" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)&#10;Omitted Generics (x3)" content="        self.assertEqual(&quot;channel6&quot;, list(channel_base.retrieve_connected_channel_unique_names(" number="318" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_not_initialised()))[0])" number="319" precision="any"/><line any_info="No Anys on this line!" content="" number="320" precision="empty"/><line any_info="No Anys on this line!" content="        &quot;&quot;&quot;" number="321" precision="empty"/><line any_info="No Anys on this line!" content="         * By default, the update timestamp is the current system timestamp on the creation of the" number="322" precision="empty"/><line any_info="No Anys on this line!" content="         * monitor object. This will then be updated upon updating the status. Since we don't update" number="323" precision="empty"/><line any_info="No Anys on this line!" content="         * the 'channel6', the timestamp will remain the system timestamp, hence it will be healthy." number="324" precision="empty"/><line any_info="No Anys on this line!" content="         * That is the reason, why we assert the size of the healthy channel names to 1." number="325" precision="empty"/><line any_info="No Anys on this line!" content="        &quot;&quot;&quot;" number="326" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        self.assertEqual(1, len(channel_base.retrieve_connected_channel_unique_names(" number="327" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            lambda flt: flt.is_channel_healthy())))" number="328" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        self.assertEqual(0, len(channel_base.retrieve_connected_channel_unique_names(" number="329" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="            lambda flt: flt.is_channel_healthy() and flt.is_channel_opened())))" number="330" precision="any"/></mypy-report-file>