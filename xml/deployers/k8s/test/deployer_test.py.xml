<?xml-stylesheet type="text/xsl" href="../../../../mypy-html.xslt"?><mypy-report-file name="deployers\k8s\test\deployer_test.py" module="deployers.k8s.test.deployer_test"><line any_info="No Anys on this line!" content="# =============================================================================" number="1" precision="empty"/><line any_info="No Anys on this line!" content="# Copyright (c) 2024 by Laszlo Anka. All rights reserved." number="2" precision="empty"/><line any_info="No Anys on this line!" content="#" number="3" precision="empty"/><line any_info="No Anys on this line!" content="# Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);" number="4" precision="empty"/><line any_info="No Anys on this line!" content="# you may not use this file except in compliance with the License." number="5" precision="empty"/><line any_info="No Anys on this line!" content="# You may obtain a copy of the License at" number="6" precision="empty"/><line any_info="No Anys on this line!" content="#" number="7" precision="empty"/><line any_info="No Anys on this line!" content="#     http://www.apache.org/licenses/LICENSE-2.0" number="8" precision="empty"/><line any_info="No Anys on this line!" content="#" number="9" precision="empty"/><line any_info="No Anys on this line!" content="# Unless required by applicable law or agreed to in writing, software" number="10" precision="empty"/><line any_info="No Anys on this line!" content="# distributed under the License is distributed on an &quot;AS IS&quot; BASIS," number="11" precision="empty"/><line any_info="No Anys on this line!" content="# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied." number="12" precision="empty"/><line any_info="No Anys on this line!" content="# See the License for the specific language governing permissions and" number="13" precision="empty"/><line any_info="No Anys on this line!" content="# limitations under the License." number="14" precision="empty"/><line any_info="No Anys on this line!" content="# =============================================================================" number="15" precision="empty"/><line any_info="No Anys on this line!" content="import time" number="16" precision="precise"/><line any_info="No Anys on this line!" content="import unittest" number="17" precision="precise"/><line any_info="No Anys on this line!" content="" number="18" precision="empty"/><line any_info="No Anys on this line!" content="from kubernetes import config" number="19" precision="any"/><line any_info="No Anys on this line!" content="from kubernetes.client import V1Secret, V1PodList, ApiException, V1Pod, Configuration, V1ObjectMeta, V1Namespace" number="20" precision="any"/><line any_info="No Anys on this line!" content="" number="21" precision="empty"/><line any_info="No Anys on this line!" content="from pypz.core.commons.utils import convert_to_dict" number="22" precision="any"/><line any_info="No Anys on this line!" content="from pypz.core.specs.misc import BlankOperator" number="23" precision="any"/><line any_info="No Anys on this line!" content="from pypz.core.specs.operator import Operator" number="24" precision="any"/><line any_info="No Anys on this line!" content="from pypz.core.specs.pipeline import Pipeline" number="25" precision="any"/><line any_info="No Anys on this line!" content="from pypz.deployers.base import DeploymentState" number="26" precision="any"/><line any_info="No Anys on this line!" content="from pypz.deployers.k8s import KubernetesDeployer, DeploymentConflictException, KubernetesParameter" number="27" precision="any"/><line any_info="No Anys on this line!" content="from pypz.executors.commons import ExecutionMode" number="28" precision="any"/><line any_info="No Anys on this line!" content="" number="29" precision="empty"/><line any_info="No Anys on this line!" content="" number="30" precision="empty"/><line any_info="No Anys on this line!" content="class TestPipeline(Pipeline):" number="31" precision="precise"/><line any_info="No Anys on this line!" content="" number="32" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="    def __init__(self, name: str, *args, **kwargs):" number="33" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        super().__init__(name, *args, **kwargs)" number="34" precision="imprecise"/><line any_info="No Anys on this line!" content="" number="35" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="        self.operator_a: BlankOperator = BlankOperator()" number="36" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="        self.operator_a.set_parameter(&quot;replicationFactor&quot;, 1)" number="37" precision="any"/><line any_info="No Anys on this line!" content="" number="38" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="        self.operator_b: BlankOperator = BlankOperator()" number="39" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="        self.operator_c: BlankOperator = BlankOperator()" number="40" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="        self.operator_d: BlankOperator = BlankOperator()" number="41" precision="any"/><line any_info="No Anys on this line!" content="" number="42" precision="empty"/><line any_info="No Anys on this line!" content="" number="43" precision="empty"/><line any_info="No Anys on this line!" content="class KubernetesDeployerTest(unittest.TestCase):" number="44" precision="precise"/><line any_info="No Anys on this line!" content="" number="45" precision="empty"/><line any_info="No Anys on this line!" content="    test_namespace = &quot;pypz-test&quot;" number="46" precision="precise"/><line any_info="No Anys on this line!" content="    test_image = &quot;pypz-test-image&quot;" number="47" precision="precise"/><line any_info="No Anys on this line!" content="" number="48" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="    config.load_kube_config()" number="49" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="    kubernetes_deployer: KubernetesDeployer = KubernetesDeployer(namespace=test_namespace," number="50" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="                                                                 configuration=Configuration.get_default_copy())" number="51" precision="any"/><line any_info="No Anys on this line!" content="" number="52" precision="empty"/><line any_info="No Anys on this line!" content="    @classmethod" number="53" precision="empty"/><line any_info="No Anys on this line!" content="    def setUpClass(cls) -&gt; None:" number="54" precision="precise"/><line any_info="No Anys on this line!" content="        try:" number="55" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="            cls.kubernetes_deployer._core_v1_api.create_namespace(" number="56" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="                body=V1Namespace(metadata=V1ObjectMeta(name=KubernetesDeployerTest.test_namespace)))" number="57" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x2)" content="        except ApiException as e:" number="58" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="            if 409 == e.status:" number="59" precision="any"/><line any_info="No Anys on this line!" content="                pass" number="60" precision="precise"/><line any_info="No Anys on this line!" content="            else:" number="61" precision="empty"/><line any_info="No Anys on this line!" content="                raise" number="62" precision="empty"/><line any_info="No Anys on this line!" content="" number="63" precision="empty"/><line any_info="No Anys on this line!" content="    @classmethod" number="64" precision="empty"/><line any_info="No Anys on this line!" content="    def tearDownClass(cls) -&gt; None:" number="65" precision="precise"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="        KubernetesDeployerTest.kubernetes_deployer._core_v1_api.delete_namespace(" number="66" precision="any"/><line any_info="No Anys on this line!" content="            KubernetesDeployerTest.test_namespace)" number="67" precision="precise"/><line any_info="No Anys on this line!" content="" number="68" precision="empty"/><line any_info="No Anys on this line!" content="        try:" number="69" precision="empty"/><line any_info="No Anys on this line!" content="            while True:" number="70" precision="precise"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="                cls.kubernetes_deployer._core_v1_api.read_namespace(KubernetesDeployerTest.test_namespace)" number="71" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x2)" content="        except ApiException as e:" number="72" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x3)" content="            if 404 == e.status:" number="73" precision="any"/><line any_info="No Anys on this line!" content="                pass" number="74" precision="precise"/><line any_info="No Anys on this line!" content="            else:" number="75" precision="empty"/><line any_info="No Anys on this line!" content="                raise" number="76" precision="empty"/><line any_info="No Anys on this line!" content="" number="77" precision="empty"/><line any_info="No Anys on this line!" content="    def setUp(self) -&gt; None:" number="78" precision="precise"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="        KubernetesDeployerTest.kubernetes_deployer._core_v1_api\" number="79" precision="any"/><line any_info="No Anys on this line!" content="            .delete_collection_namespaced_pod(KubernetesDeployerTest.test_namespace, grace_period_seconds=0)" number="80" precision="precise"/><line any_info="No Anys on this line!" content="" number="81" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="        KubernetesDeployerTest.kubernetes_deployer._core_v1_api\" number="82" precision="any"/><line any_info="No Anys on this line!" content="            .delete_collection_namespaced_secret(KubernetesDeployerTest.test_namespace, grace_period_seconds=0)" number="83" precision="precise"/><line any_info="No Anys on this line!" content="" number="84" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="        KubernetesDeployerTest.kubernetes_deployer._core_v1_api\" number="85" precision="any"/><line any_info="No Anys on this line!" content="            .delete_collection_namespaced_config_map(KubernetesDeployerTest.test_namespace, grace_period_seconds=0)" number="86" precision="precise"/><line any_info="No Anys on this line!" content="" number="87" precision="empty"/><line any_info="No Anys on this line!" content="    def test_pod_name_translation(self):" number="88" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="89" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x8)&#10;Unimported (x1)" content="        self.assertEqual(&quot;pipeline-operator-a&quot;, KubernetesDeployer.sanitize(pipeline.operator_a.get_full_name()))" number="90" precision="any"/><line any_info="No Anys on this line!" content="" number="91" precision="empty"/><line any_info="No Anys on this line!" content="    def test_deploy_normal_pipeline_expect_secret_and_pods_deployed(self):" number="92" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        client = KubernetesDeployerTest.kubernetes_deployer._core_v1_api" number="93" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="94" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="95" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="96" precision="any"/><line any_info="No Anys on this line!" content="" number="97" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="98" precision="any"/><line any_info="No Anys on this line!" content="" number="99" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="100" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="101" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="102" precision="any"/><line any_info="No Anys on this line!" content="" number="103" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x2)" content="        secret: V1Secret = \" number="104" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="            client.read_namespaced_secret(pipeline.get_full_name(), KubernetesDeployerTest.test_namespace)" number="105" precision="any"/><line any_info="No Anys on this line!" content="" number="106" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        self.assertIsNotNone(secret)" number="107" precision="any"/><line any_info="No Anys on this line!" content="" number="108" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x2)&#10;Unannotated (x4)" content="        pod_list: V1PodList = client.list_namespaced_pod(KubernetesDeployerTest.test_namespace)" number="109" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)&#10;Unimported (x1)" content="        pod_names = {pod.metadata.name for pod in pod_list.items}" number="110" precision="any"/><line any_info="No Anys on this line!" content="" number="111" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Unimported (x1)" content="        self.assertEqual(5, len(pod_list.items))" number="112" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        self.assertIn(&quot;pipeline-operator-a&quot;, pod_names)" number="113" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        self.assertIn(&quot;pipeline-operator-a-0&quot;, pod_names)" number="114" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        self.assertIn(&quot;pipeline-operator-b&quot;, pod_names)" number="115" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        self.assertIn(&quot;pipeline-operator-c&quot;, pod_names)" number="116" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        self.assertIn(&quot;pipeline-operator-d&quot;, pod_names)" number="117" precision="any"/><line any_info="No Anys on this line!" content="" number="118" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        for pod_name in pod_names:" number="119" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x1)" content="            self.assertIn(pod_name, secret.metadata.labels)" number="120" precision="any"/><line any_info="No Anys on this line!" content="" number="121" precision="empty"/><line any_info="No Anys on this line!" content="    def test_deploy_with_existing_pipeline_deployment_expect_error(self):" number="122" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="123" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="124" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="125" precision="any"/><line any_info="No Anys on this line!" content="" number="126" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="127" precision="any"/><line any_info="No Anys on this line!" content="" number="128" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        with self.assertRaises(DeploymentConflictException):" number="129" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="            KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="130" precision="any"/><line any_info="No Anys on this line!" content="" number="131" precision="empty"/><line any_info="No Anys on this line!" content="    def test_deploy_with_existing_operator_deployments_expect_error(self):" number="132" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        client = KubernetesDeployerTest.kubernetes_deployer._core_v1_api" number="133" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="134" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="135" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="136" precision="any"/><line any_info="No Anys on this line!" content="" number="137" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="138" precision="any"/><line any_info="No Anys on this line!" content="" number="139" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="        client.delete_namespaced_secret(pipeline.get_full_name(), KubernetesDeployerTest.test_namespace)" number="140" precision="any"/><line any_info="No Anys on this line!" content="" number="141" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)&#10;Unimported (x1)" content="        with self.assertRaises(DeploymentConflictException):" number="142" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="            KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="143" precision="any"/><line any_info="No Anys on this line!" content="" number="144" precision="empty"/><line any_info="No Anys on this line!" content="    def test_deploy_with_error_during_deployment_expect_rollback(self):" number="145" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        client = KubernetesDeployerTest.kubernetes_deployer._core_v1_api" number="146" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="147" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="148" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="149" precision="any"/><line any_info="No Anys on this line!" content="" number="150" precision="empty"/><line any_info="No Anys on this line!" content="        # Making operator's get_operator_image_name() to raise exception" number="151" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)&#10;Explicit (x1)" content="        setattr(pipeline.operator_d, &quot;get_operator_image_name&quot;, lambda: 1 / 0)" number="152" precision="any"/><line any_info="No Anys on this line!" content="" number="153" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        with self.assertRaises(ZeroDivisionError):" number="154" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="            KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="155" precision="any"/><line any_info="No Anys on this line!" content="" number="156" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x1)" content="        with self.assertRaises(ApiException) as e:" number="157" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="            client.read_namespaced_secret(pipeline.get_full_name(), KubernetesDeployerTest.test_namespace)" number="158" precision="any"/><line any_info="No Anys on this line!" content="" number="159" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertEqual(404, e.exception.status)" number="160" precision="any"/><line any_info="No Anys on this line!" content="" number="161" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x8)" content="        self.assertEqual(0, len(client.list_namespaced_pod(KubernetesDeployerTest.test_namespace).items))" number="162" precision="any"/><line any_info="No Anys on this line!" content="" number="163" precision="empty"/><line any_info="No Anys on this line!" content="    def test_destroy_expect_deleted_secret_and_pods(self):" number="164" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        client = KubernetesDeployerTest.kubernetes_deployer._core_v1_api" number="165" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="166" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="167" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="168" precision="any"/><line any_info="No Anys on this line!" content="" number="169" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="170" precision="any"/><line any_info="No Anys on this line!" content="" number="171" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="172" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="173" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="174" precision="any"/><line any_info="No Anys on this line!" content="" number="175" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        KubernetesDeployerTest.kubernetes_deployer.destroy(pipeline.get_full_name())" number="176" precision="any"/><line any_info="No Anys on this line!" content="" number="177" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x1)" content="        with self.assertRaises(ApiException) as e:" number="178" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="            client.read_namespaced_secret(pipeline.get_full_name(), KubernetesDeployerTest.test_namespace)" number="179" precision="any"/><line any_info="No Anys on this line!" content="" number="180" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertEqual(404, e.exception.status)" number="181" precision="any"/><line any_info="No Anys on this line!" content="" number="182" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x8)" content="        self.assertEqual(0, len(client.list_namespaced_pod(KubernetesDeployerTest.test_namespace).items))" number="183" precision="any"/><line any_info="No Anys on this line!" content="" number="184" precision="empty"/><line any_info="No Anys on this line!" content="    def test_destroy_with_force_mode_expect_deleted_secret_and_pods(self):" number="185" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        client = KubernetesDeployerTest.kubernetes_deployer._core_v1_api" number="186" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="187" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="188" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="189" precision="any"/><line any_info="No Anys on this line!" content="" number="190" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="191" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        KubernetesDeployerTest.kubernetes_deployer.destroy(pipeline.get_full_name(), force=True)" number="192" precision="any"/><line any_info="No Anys on this line!" content="" number="193" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x1)" content="        with self.assertRaises(ApiException) as e:" number="194" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="            client.read_namespaced_secret(pipeline.get_full_name(), KubernetesDeployerTest.test_namespace)" number="195" precision="any"/><line any_info="No Anys on this line!" content="" number="196" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertEqual(404, e.exception.status)" number="197" precision="any"/><line any_info="No Anys on this line!" content="" number="198" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x8)" content="        self.assertEqual(0, len(client.list_namespaced_pod(KubernetesDeployerTest.test_namespace).items))" number="199" precision="any"/><line any_info="No Anys on this line!" content="" number="200" precision="empty"/><line any_info="No Anys on this line!" content="    def test_destroy_operator_expect_operator_to_be_deleted(self):" number="201" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        client = KubernetesDeployerTest.kubernetes_deployer._core_v1_api" number="202" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="203" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="204" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="205" precision="any"/><line any_info="No Anys on this line!" content="" number="206" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="207" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="        KubernetesDeployerTest.kubernetes_deployer.destroy_operator(pipeline.operator_a.get_full_name())" number="208" precision="any"/><line any_info="No Anys on this line!" content="" number="209" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x1)" content="        with self.assertRaises(ApiException) as e:" number="210" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="            client.read_namespaced_pod(&quot;pipeline-operator-a&quot;, KubernetesDeployerTest.test_namespace)" number="211" precision="any"/><line any_info="No Anys on this line!" content="" number="212" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertEqual(404, e.exception.status)" number="213" precision="any"/><line any_info="No Anys on this line!" content="" number="214" precision="empty"/><line any_info="No Anys on this line!" content="    def test_restart_destroyed_operator_expect_operator_pod_to_be_deployed(self):" number="215" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        client = KubernetesDeployerTest.kubernetes_deployer._core_v1_api" number="216" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="217" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="218" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="219" precision="any"/><line any_info="No Anys on this line!" content="" number="220" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="221" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="        KubernetesDeployerTest.kubernetes_deployer.destroy_operator(pipeline.operator_a.get_full_name())" number="222" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        time.sleep(1)" number="223" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="        KubernetesDeployerTest.kubernetes_deployer.restart_operator(pipeline.operator_a.get_full_name())" number="224" precision="any"/><line any_info="No Anys on this line!" content="" number="225" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertIsNotNone(client.read_namespaced_pod(&quot;pipeline-operator-a&quot;," number="226" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="                                                        KubernetesDeployerTest.test_namespace))" number="227" precision="any"/><line any_info="No Anys on this line!" content="" number="228" precision="empty"/><line any_info="No Anys on this line!" content="    def test_restart_running_operator_expect_operator_pod_to_be_destroyed_and_deployed(self):" number="229" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        client = KubernetesDeployerTest.kubernetes_deployer._core_v1_api" number="230" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="231" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="232" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="233" precision="any"/><line any_info="No Anys on this line!" content="" number="234" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="235" precision="any"/><line any_info="No Anys on this line!" content="" number="236" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="237" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="238" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="239" precision="any"/><line any_info="No Anys on this line!" content="" number="240" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x2)&#10;Unannotated (x4)" content="        pod: V1Pod = client.read_namespaced_pod(&quot;pipeline-operator-a&quot;, KubernetesDeployerTest.test_namespace)" number="241" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        time.sleep(1)" number="242" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="        KubernetesDeployerTest.kubernetes_deployer.restart_operator(pipeline.operator_a.get_full_name())" number="243" precision="any"/><line any_info="No Anys on this line!" content="" number="244" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="245" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="246" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="247" precision="any"/><line any_info="No Anys on this line!" content="" number="248" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x2)&#10;Unannotated (x3)" content="        restarted_pod: V1Pod = client.read_namespaced_pod(&quot;pipeline-operator-a&quot;," number="249" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="                                                          KubernetesDeployerTest.test_namespace)" number="250" precision="any"/><line any_info="No Anys on this line!" content="" number="251" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x12)&#10;Unimported (x2)" content="        self.assertTrue(1 &lt; (restarted_pod.status.start_time.timestamp() - pod.status.start_time.timestamp()))" number="252" precision="any"/><line any_info="No Anys on this line!" content="" number="253" precision="empty"/><line any_info="No Anys on this line!" content="    def test_is_deployed(self):" number="254" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="255" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="256" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="257" precision="any"/><line any_info="No Anys on this line!" content="" number="258" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="259" precision="any"/><line any_info="No Anys on this line!" content="" number="260" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="261" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="262" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="263" precision="any"/><line any_info="No Anys on this line!" content="" number="264" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x8)" content="        self.assertTrue(KubernetesDeployerTest.kubernetes_deployer.is_deployed(pipeline.get_full_name()))" number="265" precision="any"/><line any_info="No Anys on this line!" content="" number="266" precision="empty"/><line any_info="No Anys on this line!" content="    def test_retrieve_pipeline_deployments(self):" number="267" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="268" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="269" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="270" precision="any"/><line any_info="No Anys on this line!" content="" number="271" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="272" precision="any"/><line any_info="No Anys on this line!" content="" number="273" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="274" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="275" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="276" precision="any"/><line any_info="No Anys on this line!" content="" number="277" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        self.assertEqual({&quot;pipeline&quot;}, KubernetesDeployerTest.kubernetes_deployer.retrieve_pipeline_deployments())" number="278" precision="any"/><line any_info="No Anys on this line!" content="" number="279" precision="empty"/><line any_info="No Anys on this line!" content="    def test_retrieve_deployed_pipeline(self):" number="280" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="281" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="282" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="283" precision="any"/><line any_info="No Anys on this line!" content="" number="284" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="285" precision="any"/><line any_info="No Anys on this line!" content="" number="286" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="287" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="288" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="289" precision="any"/><line any_info="No Anys on this line!" content="" number="290" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        deployed_pipeline = \" number="291" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="            KubernetesDeployerTest.kubernetes_deployer.retrieve_deployed_pipeline(pipeline.get_full_name())" number="292" precision="any"/><line any_info="No Anys on this line!" content="" number="293" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        self.assertEqual(pipeline, deployed_pipeline)" number="294" precision="any"/><line any_info="No Anys on this line!" content="" number="295" precision="empty"/><line any_info="No Anys on this line!" content="    def test_retrieve_operator_state_all_normal(self):" number="296" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="297" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="298" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="299" precision="any"/><line any_info="No Anys on this line!" content="" number="300" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="301" precision="any"/><line any_info="No Anys on this line!" content="" number="302" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="303" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="304" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="305" precision="any"/><line any_info="No Anys on this line!" content="" number="306" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x8)" content="        for operator in pipeline.get_protected().get_nested_instances().values():" number="307" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x1)" content="            self.assertEqual(DeploymentState.Completed," number="308" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                             KubernetesDeployerTest.kubernetes_deployer.retrieve_operator_state(" number="309" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                                 operator.get_full_name()))" number="310" precision="any"/><line any_info="No Anys on this line!" content="" number="311" precision="empty"/><line any_info="No Anys on this line!" content="    def test_retrieve_pipeline_state_all_normal(self):" number="312" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="313" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="314" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="315" precision="any"/><line any_info="No Anys on this line!" content="" number="316" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="317" precision="any"/><line any_info="No Anys on this line!" content="" number="318" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="319" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="320" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="321" precision="any"/><line any_info="No Anys on this line!" content="" number="322" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="        operator_states = KubernetesDeployerTest.kubernetes_deployer.retrieve_pipeline_state(pipeline.get_full_name())" number="323" precision="any"/><line any_info="No Anys on this line!" content="" number="324" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x8)" content="        for operator in pipeline.get_protected().get_nested_instances().values():" number="325" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="            self.assertIn(operator.get_full_name(), operator_states)" number="326" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x8)&#10;Unimported (x1)" content="            self.assertEqual(DeploymentState.Completed, operator_states[operator.get_full_name()])" number="327" precision="any"/><line any_info="No Anys on this line!" content="" number="328" precision="empty"/><line any_info="No Anys on this line!" content="    def test_retrieve_operator_state_one_error(self):" number="329" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="330" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="331" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="332" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)&#10;Unimported (x2)" content="        pipeline.operator_a.set_parameter(&quot;kubernetes&quot;, convert_to_dict(KubernetesParameter(" number="333" precision="any"/><line any_info="No Anys on this line!" content="            imagePullPolicy=&quot;Never&quot;," number="334" precision="any"/><line any_info="No Anys on this line!" content="            env=[" number="335" precision="empty"/><line any_info="No Anys on this line!" content="                {" number="336" precision="empty"/><line any_info="No Anys on this line!" content="                    &quot;name&quot;: &quot;PYPZ_TEST_RAISE_ERROR&quot;," number="337" precision="any"/><line any_info="No Anys on this line!" content="                    &quot;value&quot;: &quot;true&quot;" number="338" precision="any"/><line any_info="No Anys on this line!" content="                }" number="339" precision="empty"/><line any_info="No Anys on this line!" content="            ])))" number="340" precision="empty"/><line any_info="No Anys on this line!" content="" number="341" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="342" precision="any"/><line any_info="No Anys on this line!" content="" number="343" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        while KubernetesDeployerTest.kubernetes_deployer.is_any_operator_in_state(" number="344" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)&#10;Unimported (x3)" content="                pipeline.get_full_name(), DeploymentState.Open, DeploymentState.Running, DeploymentState.NotExisting):" number="345" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="346" precision="any"/><line any_info="No Anys on this line!" content="" number="347" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x1)" content="        self.assertEqual(DeploymentState.Failed," number="348" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                         KubernetesDeployerTest.kubernetes_deployer.retrieve_operator_state(" number="349" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="                             pipeline.operator_a.get_full_name()))" number="350" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x1)" content="        self.assertEqual(DeploymentState.Failed," number="351" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                         KubernetesDeployerTest.kubernetes_deployer.retrieve_operator_state(" number="352" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="                             pipeline.operator_a_0.get_full_name()))" number="353" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x1)" content="        self.assertEqual(DeploymentState.Completed," number="354" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                         KubernetesDeployerTest.kubernetes_deployer.retrieve_operator_state(" number="355" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="                             pipeline.operator_b.get_full_name()))" number="356" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x1)" content="        self.assertEqual(DeploymentState.Completed," number="357" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                         KubernetesDeployerTest.kubernetes_deployer.retrieve_operator_state(" number="358" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="                             pipeline.operator_c.get_full_name()))" number="359" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)&#10;Unimported (x1)" content="        self.assertEqual(DeploymentState.Completed," number="360" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="                         KubernetesDeployerTest.kubernetes_deployer.retrieve_operator_state(" number="361" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="                             pipeline.operator_d.get_full_name()))" number="362" precision="any"/><line any_info="No Anys on this line!" content="" number="363" precision="empty"/><line any_info="No Anys on this line!" content="    def test_retrieve_operator_logs(self):" number="364" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="365" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="366" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="367" precision="any"/><line any_info="No Anys on this line!" content="" number="368" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="369" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="370" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="371" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="372" precision="any"/><line any_info="No Anys on this line!" content="" number="373" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        operator_logs = \" number="374" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="            KubernetesDeployerTest.kubernetes_deployer.retrieve_operator_logs(pipeline.operator_a.get_full_name())" number="375" precision="any"/><line any_info="No Anys on this line!" content="" number="376" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        self.assertIsNotNone(operator_logs)" number="377" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x11)&#10;Unimported (x2)" content="        self.assertIn(f&quot;{KubernetesDeployer._env_var_operator_exec_mode}={ExecutionMode.Standard.value}&quot;," number="378" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="                      operator_logs)" number="379" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x13)&#10;Unimported (x1)" content="        self.assertIn(f&quot;{KubernetesDeployer._env_var_operator_name}={pipeline.operator_a.get_simple_name()}&quot;," number="380" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="                      operator_logs)" number="381" precision="any"/><line any_info="No Anys on this line!" content="" number="382" precision="empty"/><line any_info="No Anys on this line!" content="    def test_attach_with_one_operator_failing(self):" number="383" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="384" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="385" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="386" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)&#10;Unimported (x2)" content="        pipeline.operator_a.set_parameter(&quot;kubernetes&quot;, convert_to_dict(KubernetesParameter(" number="387" precision="any"/><line any_info="No Anys on this line!" content="            imagePullPolicy=&quot;Never&quot;," number="388" precision="any"/><line any_info="No Anys on this line!" content="            env=[" number="389" precision="empty"/><line any_info="No Anys on this line!" content="                {" number="390" precision="empty"/><line any_info="No Anys on this line!" content="                    &quot;name&quot;: &quot;PYPZ_TEST_RAISE_ERROR&quot;," number="391" precision="any"/><line any_info="No Anys on this line!" content="                    &quot;value&quot;: &quot;true&quot;" number="392" precision="any"/><line any_info="No Anys on this line!" content="                }" number="393" precision="empty"/><line any_info="No Anys on this line!" content="            ])))" number="394" precision="empty"/><line any_info="No Anys on this line!" content="" number="395" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x2)&#10;Unannotated (x1)" content="        def on_operator_failure(operator: Operator, state: DeploymentState):" number="396" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x4)" content="            if DeploymentState.Failed == state:" number="397" precision="any"/><line any_info="Any Types on this line: &#10;Explicit (x2)&#10;Unimported (x5)&#10;Unannotated (x4)" content="                self.assertTrue((operator.get_full_name() == pipeline.operator_a.get_full_name()) or" number="398" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x4)&#10;Unannotated (x4)" content="                                (operator.get_full_name() == pipeline.operator_a_0.get_full_name()))" number="399" precision="any"/><line any_info="No Anys on this line!" content="" number="400" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="401" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        KubernetesDeployerTest.kubernetes_deployer.attach(pipeline.get_full_name()," number="402" precision="any"/><line any_info="Any Types on this line: &#10;Unimported (x2)&#10;Unannotated (x1)" content="                                                          on_operator_state_change=on_operator_failure)" number="403" precision="precise"/><line any_info="No Anys on this line!" content="" number="404" precision="empty"/><line any_info="No Anys on this line!" content="    def test_deploy_with_kubernetes_parameters_from_class(self):" number="405" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="406" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="407" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="408" precision="any"/><line any_info="No Anys on this line!" content="" number="409" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x3)&#10;Unannotated (x1)" content="        kubernetes_parameters: KubernetesParameter = KubernetesParameter()" number="410" precision="any"/><line any_info="No Anys on this line!" content="" number="411" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.operator_a.set_parameter(&quot;kubernetes&quot;, convert_to_dict(kubernetes_parameters))" number="412" precision="any"/><line any_info="No Anys on this line!" content="" number="413" precision="empty"/><line any_info="No Anys on this line!" content="        try:" number="414" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="            KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="415" precision="any"/><line any_info="No Anys on this line!" content="        except:  # noqa: E722" number="416" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            self.fail()" number="417" precision="any"/><line any_info="No Anys on this line!" content="" number="418" precision="empty"/><line any_info="No Anys on this line!" content="    def test_deploy_with_kubernetes_parameters_from_dict(self):" number="419" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="420" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="421" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="422" precision="any"/><line any_info="No Anys on this line!" content="" number="423" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.operator_a.set_parameter(&quot;kubernetes&quot;, {})" number="424" precision="any"/><line any_info="No Anys on this line!" content="" number="425" precision="empty"/><line any_info="No Anys on this line!" content="        try:" number="426" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="            KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="427" precision="any"/><line any_info="No Anys on this line!" content="        except:  # noqa: E722" number="428" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="            self.fail()" number="429" precision="any"/><line any_info="No Anys on this line!" content="" number="430" precision="empty"/><line any_info="No Anys on this line!" content="    def test_deploy_with_kubernetes_parameters_with_invalid_type(self):" number="431" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="432" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="433" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="434" precision="any"/><line any_info="No Anys on this line!" content="" number="435" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.operator_a.set_parameter(&quot;kubernetes&quot;, &quot;string&quot;)" number="436" precision="any"/><line any_info="No Anys on this line!" content="" number="437" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        with self.assertRaises(TypeError):" number="438" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="            KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="439" precision="any"/><line any_info="No Anys on this line!" content="" number="440" precision="empty"/><line any_info="No Anys on this line!" content="    def test_deploy_with_kubernetes_parameters_with_env_var(self):" number="441" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="442" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="443" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="444" precision="any"/><line any_info="No Anys on this line!" content="" number="445" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x3)&#10;Unannotated (x1)" content="        kubernetes_parameters: KubernetesParameter = KubernetesParameter()" number="446" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="        kubernetes_parameters.imagePullPolicy = &quot;Never&quot;" number="447" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="        kubernetes_parameters.env = [" number="448" precision="any"/><line any_info="No Anys on this line!" content="            {" number="449" precision="empty"/><line any_info="No Anys on this line!" content="                &quot;name&quot;: &quot;PYPZ_TEST_ENV_VAR&quot;," number="450" precision="any"/><line any_info="No Anys on this line!" content="                &quot;value&quot;: &quot;VAL&quot;" number="451" precision="any"/><line any_info="No Anys on this line!" content="            }" number="452" precision="empty"/><line any_info="No Anys on this line!" content="        ]" number="453" precision="empty"/><line any_info="No Anys on this line!" content="" number="454" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.operator_a.set_parameter(&quot;kubernetes&quot;, convert_to_dict(kubernetes_parameters))" number="455" precision="any"/><line any_info="No Anys on this line!" content="" number="456" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="457" precision="any"/><line any_info="No Anys on this line!" content="" number="458" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="459" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="460" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="461" precision="any"/><line any_info="No Anys on this line!" content="" number="462" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        operator_logs = \" number="463" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="            KubernetesDeployerTest.kubernetes_deployer.retrieve_operator_logs(pipeline.operator_a.get_full_name())" number="464" precision="any"/><line any_info="No Anys on this line!" content="" number="465" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        self.assertIn(&quot;PYPZ_TEST_ENV_VAR=VAL&quot;," number="466" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="                      operator_logs)" number="467" precision="any"/><line any_info="No Anys on this line!" content="" number="468" precision="empty"/><line any_info="No Anys on this line!" content="    def test_deploy_with_kubernetes_parameters_with_env_var_from_config_map(self):" number="469" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        client = KubernetesDeployerTest.kubernetes_deployer._core_v1_api" number="470" precision="any"/><line any_info="No Anys on this line!" content="" number="471" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        config_map = {" number="472" precision="any"/><line any_info="No Anys on this line!" content="            &quot;apiVersion&quot;: &quot;v1&quot;," number="473" precision="any"/><line any_info="No Anys on this line!" content="            &quot;kind&quot;: &quot;ConfigMap&quot;," number="474" precision="any"/><line any_info="No Anys on this line!" content="            &quot;metadata&quot;: {" number="475" precision="any"/><line any_info="No Anys on this line!" content="                &quot;name&quot;: &quot;test-config-map&quot;" number="476" precision="any"/><line any_info="No Anys on this line!" content="            }," number="477" precision="empty"/><line any_info="No Anys on this line!" content="            &quot;data&quot;: {" number="478" precision="any"/><line any_info="No Anys on this line!" content="                &quot;PYPZ_TEST_ENV_VAR&quot;: &quot;VAL&quot;" number="479" precision="any"/><line any_info="No Anys on this line!" content="            }" number="480" precision="empty"/><line any_info="No Anys on this line!" content="        }" number="481" precision="empty"/><line any_info="No Anys on this line!" content="" number="482" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        client.create_namespaced_config_map(KubernetesDeployerTest.test_namespace, body=config_map)" number="483" precision="any"/><line any_info="No Anys on this line!" content="" number="484" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="485" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="486" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="487" precision="any"/><line any_info="No Anys on this line!" content="" number="488" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x3)&#10;Unannotated (x1)" content="        kubernetes_parameters: KubernetesParameter = KubernetesParameter()" number="489" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="        kubernetes_parameters.imagePullPolicy = &quot;Never&quot;" number="490" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="        kubernetes_parameters.env = [" number="491" precision="any"/><line any_info="No Anys on this line!" content="            {" number="492" precision="empty"/><line any_info="No Anys on this line!" content="                &quot;name&quot;: &quot;PYPZ_TEST_ENV_VAR&quot;," number="493" precision="any"/><line any_info="No Anys on this line!" content="                &quot;valueFrom&quot;: {" number="494" precision="any"/><line any_info="No Anys on this line!" content="                    &quot;configMapKeyRef&quot;: {" number="495" precision="any"/><line any_info="No Anys on this line!" content="                        &quot;name&quot;: &quot;test-config-map&quot;," number="496" precision="any"/><line any_info="No Anys on this line!" content="                        &quot;key&quot;: &quot;PYPZ_TEST_ENV_VAR&quot;" number="497" precision="any"/><line any_info="No Anys on this line!" content="                    }" number="498" precision="empty"/><line any_info="No Anys on this line!" content="                }" number="499" precision="empty"/><line any_info="No Anys on this line!" content="            }" number="500" precision="empty"/><line any_info="No Anys on this line!" content="        ]" number="501" precision="empty"/><line any_info="No Anys on this line!" content="" number="502" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.operator_a.set_parameter(&quot;kubernetes&quot;, convert_to_dict(kubernetes_parameters))" number="503" precision="any"/><line any_info="No Anys on this line!" content="" number="504" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="505" precision="any"/><line any_info="No Anys on this line!" content="" number="506" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="507" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="508" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="509" precision="any"/><line any_info="No Anys on this line!" content="" number="510" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        operator_logs = \" number="511" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="            KubernetesDeployerTest.kubernetes_deployer.retrieve_operator_logs(pipeline.operator_a.get_full_name())" number="512" precision="any"/><line any_info="No Anys on this line!" content="" number="513" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        self.assertIn(&quot;PYPZ_TEST_ENV_VAR=VAL&quot;," number="514" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="                      operator_logs)" number="515" precision="any"/><line any_info="No Anys on this line!" content="" number="516" precision="empty"/><line any_info="No Anys on this line!" content="    def test_deploy_with_kubernetes_parameters_with_env_var_from_secret(self):" number="517" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x3)" content="        client = KubernetesDeployerTest.kubernetes_deployer._core_v1_api" number="518" precision="any"/><line any_info="No Anys on this line!" content="" number="519" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        secret = {" number="520" precision="any"/><line any_info="No Anys on this line!" content="            &quot;apiVersion&quot;: &quot;v1&quot;," number="521" precision="any"/><line any_info="No Anys on this line!" content="            &quot;kind&quot;: &quot;Secret&quot;," number="522" precision="any"/><line any_info="No Anys on this line!" content="            &quot;metadata&quot;: {" number="523" precision="any"/><line any_info="No Anys on this line!" content="                &quot;name&quot;: &quot;test-secret&quot;" number="524" precision="any"/><line any_info="No Anys on this line!" content="            }," number="525" precision="empty"/><line any_info="No Anys on this line!" content="            &quot;stringData&quot;: {" number="526" precision="any"/><line any_info="No Anys on this line!" content="                &quot;PYPZ_TEST_ENV_VAR&quot;: &quot;VAL&quot;" number="527" precision="any"/><line any_info="No Anys on this line!" content="            }" number="528" precision="empty"/><line any_info="No Anys on this line!" content="        }" number="529" precision="empty"/><line any_info="No Anys on this line!" content="" number="530" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)" content="        client.create_namespaced_secret(KubernetesDeployerTest.test_namespace, body=secret)" number="531" precision="any"/><line any_info="No Anys on this line!" content="" number="532" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline = TestPipeline(&quot;pipeline&quot;)" number="533" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.set_parameter(&quot;&gt;kubernetes&quot;, convert_to_dict(KubernetesParameter(imagePullPolicy=&quot;Never&quot;)))" number="534" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        pipeline.set_parameter(&quot;&gt;operatorImageName&quot;, KubernetesDeployerTest.test_image)" number="535" precision="any"/><line any_info="No Anys on this line!" content="" number="536" precision="empty"/><line any_info="Any Types on this line: &#10;Unimported (x3)&#10;Unannotated (x1)" content="        kubernetes_parameters: KubernetesParameter = KubernetesParameter()" number="537" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="        kubernetes_parameters.imagePullPolicy = &quot;Never&quot;" number="538" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="        kubernetes_parameters.env = [" number="539" precision="any"/><line any_info="No Anys on this line!" content="            {" number="540" precision="empty"/><line any_info="No Anys on this line!" content="                &quot;name&quot;: &quot;PYPZ_TEST_ENV_VAR&quot;," number="541" precision="any"/><line any_info="No Anys on this line!" content="                &quot;valueFrom&quot;: {" number="542" precision="any"/><line any_info="No Anys on this line!" content="                    &quot;secretKeyRef&quot;: {" number="543" precision="any"/><line any_info="No Anys on this line!" content="                        &quot;name&quot;: &quot;test-secret&quot;," number="544" precision="any"/><line any_info="No Anys on this line!" content="                        &quot;key&quot;: &quot;PYPZ_TEST_ENV_VAR&quot;" number="545" precision="any"/><line any_info="No Anys on this line!" content="                    }" number="546" precision="empty"/><line any_info="No Anys on this line!" content="                }" number="547" precision="empty"/><line any_info="No Anys on this line!" content="            }" number="548" precision="empty"/><line any_info="No Anys on this line!" content="        ]" number="549" precision="empty"/><line any_info="No Anys on this line!" content="" number="550" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x5)&#10;Unimported (x2)" content="        pipeline.operator_a.set_parameter(&quot;kubernetes&quot;, convert_to_dict(kubernetes_parameters))" number="551" precision="any"/><line any_info="No Anys on this line!" content="" number="552" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x4)" content="        KubernetesDeployerTest.kubernetes_deployer.deploy(pipeline)" number="553" precision="any"/><line any_info="No Anys on this line!" content="" number="554" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x6)" content="        while not KubernetesDeployerTest.kubernetes_deployer.is_all_operator_in_state(pipeline.get_full_name()," number="555" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)&#10;Unimported (x1)" content="                                                                                      DeploymentState.Completed):" number="556" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="            time.sleep(1)" number="557" precision="any"/><line any_info="No Anys on this line!" content="" number="558" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="        operator_logs = \" number="559" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x7)" content="            KubernetesDeployerTest.kubernetes_deployer.retrieve_operator_logs(pipeline.operator_a.get_full_name())" number="560" precision="any"/><line any_info="No Anys on this line!" content="" number="561" precision="empty"/><line any_info="Any Types on this line: &#10;Unannotated (x2)" content="        self.assertIn(&quot;PYPZ_TEST_ENV_VAR=VAL&quot;," number="562" precision="any"/><line any_info="Any Types on this line: &#10;Unannotated (x1)" content="                      operator_logs)" number="563" precision="any"/></mypy-report-file>